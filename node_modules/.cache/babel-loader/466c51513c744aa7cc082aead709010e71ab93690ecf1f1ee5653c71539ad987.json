{"ast":null,"code":"import _objectSpread from\"F:/mew png-71/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import React, { useState, useEffect, useCallback } from \"react\";\n// import { useNavigate, useLocation } from \"react-router-dom\";\n// import { useApi } from \"../../../hooks/useApi\";\n// const BettingRecords = ({ showError, showSuccess, showWarning, showInfo }) => {\n//   const navigate = useNavigate();\n//   const location = useLocation();\n//   const [activeTab, setActiveTab] = useState(\"settled\");\n//   const [showFilter, setShowFilter] = useState(false);\n//   const [loading, setLoading] = useState(false);\n//   const [loadingMore, setLoadingMore] = useState(false);\n//   const [hasMore, setHasMore] = useState(true);\n//   const { apiCall } = useApi();\n//   // Filter states\n//   const [filters, setFilters] = useState({\n//     startDate: \"\",\n//     endDate: \"\",\n//     platforms: [],\n//     gameTypes: [],\n//     settlement: \"settled\",\n//     page: 1,\n//     limit: 2000,\n//   });\n//   const [availableFilters, setAvailableFilters] = useState({\n//     platforms: [],\n//     gameTypes: [],\n//     dateRange: { minDate: null, maxDate: null },\n//   });\n//   const [bettingData, setBettingData] = useState([]);\n//   const [pagination, setPagination] = useState({\n//     page: 1,\n//     limit: 2000,\n//     total: 0,\n//     pages: 0,\n//   });\n//   // Date options for quick selection\n//   const dateOptions = [\n//     {\n//       value: \"today\",\n//       label: \"Today\",\n//       getDate: () => {\n//         const today = new Date();\n//         return {\n//           startDate: today.toISOString().split(\"T\")[0],\n//           endDate: today.toISOString().split(\"T\")[0],\n//         };\n//       },\n//     },\n//     {\n//       value: \"yesterday\",\n//       label: \"Yesterday\",\n//       getDate: () => {\n//         const yesterday = new Date();\n//         yesterday.setDate(yesterday.getDate() - 1);\n//         return {\n//           startDate: yesterday.toISOString().split(\"T\")[0],\n//           endDate: yesterday.toISOString().split(\"T\")[0],\n//         };\n//       },\n//     },\n//     {\n//       value: \"last7days\",\n//       label: \"Last 7 days\",\n//       getDate: () => {\n//         const endDate = new Date();\n//         const startDate = new Date();\n//         startDate.setDate(startDate.getDate() - 6);\n//         return {\n//           startDate: startDate.toISOString().split(\"T\")[0],\n//           endDate: endDate.toISOString().split(\"T\")[0],\n//         };\n//       },\n//     },\n//     {\n//       value: \"last30days\",\n//       label: \"Last 30 days\",\n//       getDate: () => {\n//         const endDate = new Date();\n//         const startDate = new Date();\n//         startDate.setDate(startDate.getDate() - 29);\n//         return {\n//           startDate: startDate.toISOString().split(\"T\")[0],\n//           endDate: endDate.toISOString().split(\"T\")[0],\n//         };\n//       },\n//     },\n//   ];\n//   const [selectedDateOption, setSelectedDateOption] = useState(\"last7days\");\n//   // Load available filters\n//   const loadAvailableFilters = useCallback(async () => {\n//     try {\n//       const response = await apiCall(\"/game-list-filters\", \"GET\");\n//       console.log(\"GamesProvidersPage category result\", response.data);\n//       if (response.success) {\n//         setAvailableFilters(response.data || {});\n//       }\n//     } catch (error) {\n//       console.error(\"Error loading filters:\", error);\n//       showError(\"Failed to load filters\");\n//     }\n//   }, [apiCall, showError]);\n//   // Load betting records\n//   const loadBettingRecords = useCallback(\n//     async (page = 1, isLoadMore = false) => {\n//       try {\n//         if (isLoadMore) {\n//           setLoadingMore(true);\n//         } else {\n//           setLoading(true);\n//         }\n//         const params = {\n//           page,\n//           limit: filters.limit,\n//           settlement: activeTab,\n//         };\n//         // Add platform and game type filters if they exist\n//         if (filters.platforms.length > 0) {\n//           params.platforms = filters.platforms;\n//         }\n//         if (filters.gameTypes.length > 0) {\n//           params.gameTypes = filters.gameTypes;\n//         }\n//         // Apply date filter based on selected option\n//         if (selectedDateOption && dateOptions.find((opt) => opt.value === selectedDateOption)) {\n//           const dateOption = dateOptions.find(\n//             (opt) => opt.value === selectedDateOption\n//           );\n//           const dates = dateOption.getDate();\n//           params.startDate = dates.startDate;\n//           params.endDate = dates.endDate;\n//         }\n//         console.log(\"Loading betting records with params:\", params);\n//         // Use the correct endpoint for betting records\n//         const response = await apiCall(\"/betting-history\", \"GET\", params);\n//         if (response.success) {\n//           if (isLoadMore) {\n//             setBettingData((prev) => [...prev, ...response.data]);\n//           } else {\n//             setBettingData(response.data || []);\n//           }\n//           setPagination(response.pagination || {\n//             page: page,\n//             limit: filters.limit,\n//             total: response.data?.length || 0,\n//             pages: Math.ceil((response.data?.length || 0) / filters.limit)\n//           });\n//           setHasMore(page < (response.pagination?.pages || 1));\n//           if (isLoadMore) {\n//             showSuccess(`Loaded ${response.data?.length || 0} more records`);\n//           }\n//         } else {\n//           showError(response.message || \"Failed to load betting records\");\n//         }\n//       } catch (error) {\n//         console.error(\"Error loading betting records:\", error);\n//         showError(\"Failed to load betting records\");\n//       } finally {\n//         setLoading(false);\n//         setLoadingMore(false);\n//       }\n//     },\n//     [filters, activeTab, selectedDateOption, showError, showSuccess, apiCall, dateOptions]\n//   );\n//   // Initial load\n//   useEffect(() => {\n//     loadAvailableFilters();\n//     loadBettingRecords(1, false);\n//   }, []);\n//   // Reload when filters or tab change\n//   useEffect(() => {\n//     setBettingData([]);\n//     setPagination(prev => ({ ...prev, page: 1 }));\n//     loadBettingRecords(1, false);\n//   }, [filters, activeTab, selectedDateOption]);\n//   // Handle tab change\n//   const handleTabChange = (tab) => {\n//     setActiveTab(tab);\n//     setFilters((prev) => ({ ...prev, settlement: tab, page: 1 }));\n//   };\n//   // Handle filter toggle\n//   const toggleFilter = () => {\n//     setShowFilter(!showFilter);\n//   };\n//   // Handle platform selection\n//   const handlePlatformToggle = (platform) => {\n//     setFilters((prev) => ({\n//       ...prev,\n//       platforms: prev.platforms.includes(platform)\n//         ? prev.platforms.filter((p) => p !== platform)\n//         : [...prev.platforms, platform],\n//       page: 1,\n//     }));\n//   };\n//   // Handle game type selection\n//   const handleGameTypeToggle = (gameType) => {\n//     setFilters((prev) => ({\n//       ...prev,\n//       gameTypes: prev.gameTypes.includes(gameType)\n//         ? prev.gameTypes.filter((g) => g !== gameType)\n//         : [...prev.gameTypes, gameType],\n//       page: 1,\n//     }));\n//   };\n//   // Handle date option change\n//   const handleDateOptionChange = (optionValue) => {\n//     setSelectedDateOption(optionValue);\n//     setFilters((prev) => ({ ...prev, page: 1 }));\n//   };\n//   // Select all platforms\n//   const selectAllPlatforms = () => {\n//     setFilters(prev => ({\n//       ...prev,\n//       platforms: [...availableFilters.platforms],\n//       page: 1\n//     }));\n//   };\n//   // Clear all platforms\n//   const clearAllPlatforms = () => {\n//     setFilters(prev => ({\n//       ...prev,\n//       platforms: [],\n//       page: 1\n//     }));\n//   };\n//   // Select all game types\n//   const selectAllGameTypes = () => {\n//     setFilters(prev => ({\n//       ...prev,\n//       gameTypes: [...availableFilters.gameTypes],\n//       page: 1\n//     }));\n//   };\n//   // Clear all game types\n//   const clearAllGameTypes = () => {\n//     setFilters(prev => ({\n//       ...prev,\n//       gameTypes: [],\n//       page: 1\n//     }));\n//   };\n//   // Apply filters and close filter panel\n//   const applyFilters = () => {\n//     setShowFilter(false);\n//     setBettingData([]);\n//     loadBettingRecords(1, false);\n//     showInfo(\"Filters applied successfully\");\n//   };\n//   // Reset filters\n//   const resetFilters = () => {\n//     setFilters({\n//       startDate: \"\",\n//       endDate: \"\",\n//       platforms: [],\n//       gameTypes: [],\n//       settlement: activeTab,\n//       page: 1,\n//       limit: 200,\n//     });\n//     setSelectedDateOption(\"last7days\");\n//     showInfo(\"Filters reset to default\");\n//   };\n//   // Close filter panel\n//   const closeFilter = () => {\n//     setShowFilter(false);\n//   };\n//   // Load more records\n//   const loadMore = () => {\n//     if (!loadingMore && hasMore) {\n//       const nextPage = pagination.page + 1;\n//       setFilters(prev => ({ ...prev, page: nextPage }));\n//       loadBettingRecords(nextPage, true);\n//     }\n//   };\n//   // Format currency\n//   const formatCurrency = (amount) => {\n//     return new Intl.NumberFormat(\"en-US\", {\n//       minimumFractionDigits: 2,\n//       maximumFractionDigits: 2,\n//     }).format(amount || 0);\n//   };\n//   // Format date\n//   const formatDate = (dateString) => {\n//     try {\n//       const date = new Date(dateString);\n//       return date.toLocaleDateString(\"en-US\", {\n//         year: \"numeric\",\n//         month: \"short\",\n//         day: \"numeric\",\n//       });\n//     } catch (error) {\n//       return \"Invalid Date\";\n//     }\n//   };\n//   // Calculate total stats for a date group\n//   const calculateDateGroupStats = (records) => {\n//     const totals = records.reduce((acc, record) => ({\n//       turnover: acc.turnover + (record.turnover || 0),\n//       profitLoss: acc.profitLoss + (record.profitLoss || 0),\n//       bet: acc.bet + (record.bet || 0),\n//       payout: acc.payout + (record.payout || 0),\n//     }), { turnover: 0, profitLoss: 0, bet: 0, payout: 0 });\n//     return totals;\n//   };\n//   return (\n//     <div className=\"member-content betting-records-page fixed-tab player-content\">\n//       {/* Header Section */}\n//       <div className=\"page-header\">\n//         <div className=\"header-content\">\n//           <h1 className=\"page-title\">Betting Records</h1>\n//           <div className=\"header-stats\">\n//             <div className=\"stat-item\">\n//               <span className=\"stat-label\">Total Records:</span>\n//               <span className=\"stat-value\">{pagination.total}</span>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//       {/* Tab Navigation */}\n//       <div className=\"tab-btn-section\">\n//         <div className=\"tab-btn tab-btn-page\">\n//           <div\n//             className=\"line\"\n//             style={{\n//               width: \"calc(50%)\",\n//               transform: `translate(${\n//                 activeTab === \"settled\" ? \"0%\" : \"100%\"\n//               }, 0px)`,\n//             }}\n//           ></div>\n//           <div\n//             className={`btn ${activeTab === \"settled\" ? \"active\" : \"\"}`}\n//             onClick={() => handleTabChange(\"settled\")}\n//           >\n//             <div className=\"text\">Settled</div>\n//           </div>\n//           <div\n//             className={`btn ${activeTab === \"unsettled\" ? \"active\" : \"\"}`}\n//             onClick={() => handleTabChange(\"unsettled\")}\n//           >\n//             <div className=\"text\">Unsettled</div>\n//           </div>\n//         </div>\n//       </div>\n//       {/* Filter Tab */}\n//       <div className=\"tab filter-tab\">\n//         <ul className=\"item-ani\">\n//           {dateOptions.map((option) => (\n//             <li\n//               key={option.value}\n//               className={selectedDateOption === option.value ? \"active\" : \"\"}\n//               onClick={() => handleDateOptionChange(option.value)}\n//             >\n//               {option.label}\n//             </li>\n//           ))}\n//         </ul>\n//         <div className=\"btn search-btn\" onClick={toggleFilter}>\n//           <span\n//             className=\"item-icon\"\n//             style={{\n//               maskImage: 'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',\n//               WebkitMaskImage: 'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',\n//             }}\n//           ></span>\n//           <span className=\"filter-badge\">\n//             {filters.platforms.length + filters.gameTypes.length > 0 ? \n//               filters.platforms.length + filters.gameTypes.length : ''}\n//           </span>\n//         </div>\n//       </div>\n//       {/* Filter Panel */}\n//       {showFilter && (\n//         <div className=\"searchpage active\">\n//           <div className=\"search-top-info\">\n//             <div className=\"back\" onClick={closeFilter}>\n//               <span\n//                 className=\"item-icon\"\n//                 style={{\n//                   maskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\n//                   WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\n//                 }}\n//               ></span>\n//               Back\n//             </div>\n//             <input\n//               type=\"text\"\n//               placeholder=\"Betting Record Filter\"\n//               disabled\n//               style={{ backgroundImage: 'url(\"\")' }}\n//             />\n//           </div>\n//           <div className=\"searchpage-main\">\n//             {/* Platforms Filter */}\n//             <div className=\"search-checkbox-group check-group\">\n//               <div className=\"filter-header\">\n//                 <h2>Platform ({filters.platforms.length} selected)</h2>\n//                 <div className=\"filter-actions\">\n//                   <button className=\"filter-action-btn\" onClick={selectAllPlatforms}>\n//                     Select All\n//                   </button>\n//                   <button className=\"filter-action-btn\" onClick={clearAllPlatforms}>\n//                     Clear All\n//                   </button>\n//                 </div>\n//               </div>\n//               <ul>\n//                 {availableFilters.platforms && availableFilters.platforms.map((platform) => (\n//                   <li key={platform}>\n//                     <input\n//                       type=\"checkbox\"\n//                       id={`platform-${platform}`}\n//                       checked={filters.platforms.includes(platform)}\n//                       onChange={() => handlePlatformToggle(platform)}\n//                     />\n//                     <label htmlFor={`platform-${platform}`}>{platform}</label>\n//                   </li>\n//                 ))}\n//               </ul>\n//             </div>\n//             {/* Game Types Filter */}\n//             <div className=\"search-checkbox-group check-group\">\n//               <div className=\"filter-header\">\n//                 <h2>Game Type ({filters.gameTypes.length} selected)</h2>\n//                 <div className=\"filter-actions\">\n//                   <button className=\"filter-action-btn\" onClick={selectAllGameTypes}>\n//                     Select All\n//                   </button>\n//                   <button className=\"filter-action-btn\" onClick={clearAllGameTypes}>\n//                     Clear All\n//                   </button>\n//                 </div>\n//               </div>\n//               <ul>\n//                 {availableFilters.gameTypes && availableFilters.gameTypes.map((gameType) => (\n//                   <li key={gameType}>\n//                     <input\n//                       type=\"checkbox\"\n//                       id={`gameType-${gameType}`}\n//                       checked={filters.gameTypes.includes(gameType)}\n//                       onChange={() => handleGameTypeToggle(gameType)}\n//                     />\n//                     <label htmlFor={`gameType-${gameType}`}>{gameType}</label>\n//                   </li>\n//                 ))}\n//               </ul>\n//             </div>\n//             {/* Date Filter */}\n//             <div className=\"search-checkbox-group check-group\">\n//               <h2>Date Range</h2>\n//               <ul>\n//                 {dateOptions.map((option) => (\n//                   <li key={option.value}>\n//                     <input\n//                       type=\"radio\"\n//                       id={`date-${option.value}`}\n//                       name=\"dateOption\"\n//                       checked={selectedDateOption === option.value}\n//                       onChange={() => handleDateOptionChange(option.value)}\n//                     />\n//                     <label htmlFor={`date-${option.value}`}>{option.label}</label>\n//                   </li>\n//                 ))}\n//               </ul>\n//             </div>\n//           </div>\n//           <div className=\"searchpage-bar active\">\n//             <button className=\"button button-secondary\" onClick={resetFilters}>\n//               Reset\n//             </button>\n//             <button className=\"button\" onClick={applyFilters}>\n//               Confirm\n//             </button>\n//           </div>\n//         </div>\n//       )}\n//       {/* Betting Records Content */}\n//       {!showFilter && (\n//         <div className=\"inner-wrap\">\n//           <div className=\"inner-box\">\n//             {/* Loading State */}\n//             {loading && (\n//               <div className=\"loading-state\">\n//                 <div className=\"loading-spinner\"></div>\n//                 <div className=\"loading-text\">Loading betting records...</div>\n//               </div>\n//             )}\n//             {/* Active Filters Summary */}\n//             {!loading && (filters.platforms.length > 0 || filters.gameTypes.length > 0) && (\n//               <div className=\"active-filters\">\n//                 <div className=\"filters-summary\">\n//                   <span className=\"filters-label\">Active Filters:</span>\n//                   {filters.platforms.length > 0 && (\n//                     <div className=\"filter-tag\">\n//                       Platforms: {filters.platforms.join(\", \")}\n//                       <button \n//                         className=\"filter-tag-remove\"\n//                         onClick={() => setFilters(prev => ({ ...prev, platforms: [] }))}\n//                       >\n//                         ×\n//                       </button>\n//                     </div>\n//                   )}\n//                   {filters.gameTypes.length > 0 && (\n//                     <div className=\"filter-tag\">\n//                       Game Types: {filters.gameTypes.join(\", \")}\n//                       <button \n//                         className=\"filter-tag-remove\"\n//                         onClick={() => setFilters(prev => ({ ...prev, gameTypes: [] }))}\n//                       >\n//                         ×\n//                       </button>\n//                     </div>\n//                   )}\n//                 </div>\n//               </div>\n//             )}\n//             {/* Table Header */}\n//             {!loading && bettingData.length > 0 && (\n//               <div className=\"record-item item-title\">\n//                 <div className=\"item platform\">Platform</div>\n//                 <div className=\"item type\">Game Type</div>\n//                 <div className=\"item bet\">Turnover</div>\n//                 <div className=\"item profit\">Profit/Loss</div>\n//               </div>\n//             )}\n//             {/* Betting Records List */}\n//             {!loading && bettingData.length > 0 && (\n//               <div className=\"list list-betting-record\">\n//                 {bettingData.map((dayData, index) => {\n//                   const dayStats = calculateDateGroupStats(dayData.records || []);\n//                   return (\n//                     <div key={index} className=\"date-group\">\n//                       <div className=\"date-title\">\n//                         <div className=\"date\">\n//                           <span\n//                             className=\"item-icon\"\n//                             style={{\n//                               maskImage: 'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',\n//                               WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',\n//                             }}\n//                           ></span>\n//                           {formatDate(dayData.date)}\n//                         </div>\n//                         <div className=\"date-stats\">\n//                           <span className=\"stat\">Turnover: {formatCurrency(dayStats.turnover)}</span>\n//                           <span className={`stat ${dayStats.profitLoss >= 0 ? 'positive' : 'negative'}`}>\n//                             P/L: {formatCurrency(dayStats.profitLoss)}\n//                           </span>\n//                         </div>\n//                         <div className=\"time-zone\">GMT+8</div>\n//                       </div>\n//                       <div className=\"list-content\">\n//                         {dayData.records && dayData.records.map((record, recordIndex) => (\n//                           <div\n//                             key={record._id || recordIndex}\n//                             className=\"record-item\"\n//                             onClick={() => showInfo(`Platform: ${record.platform} | Game: ${record.gameType}`)}\n//                           >\n//                             <div className=\"item platform\">\n//                               <span className=\"platform-name\">{record.platform}</span>\n//                             </div>\n//                             <div className=\"item type\">\n//                               <span className=\"game-type\">{record.gameType}</span>\n//                             </div>\n//                             <div className=\"item bet\">\n//                               {formatCurrency(record.turnover)}\n//                             </div>\n//                             <div\n//                               className={`item profit ${\n//                                 record.profitLoss >= 0 ? \"positive\" : \"negative\"\n//                               }`}\n//                             >\n//                               {record.profitLoss >= 0 ? \"+\" : \"-\"}\n//                               {formatCurrency(Math.abs(record.profitLoss))}\n//                             </div>\n//                             <div\n//                               className=\"list-arrow\"\n//                               style={{\n//                                 maskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\n//                                 WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\n//                               }}\n//                             ></div>\n//                           </div>\n//                         ))}\n//                       </div>\n//                     </div>\n//                   );\n//                 })}\n//               </div>\n//             )}\n//             {/* Load More Button */}\n//             {!loading && hasMore && bettingData.length > 0 && (\n//               <div className=\"load-more-section\">\n//                 <button\n//                   className=\"load-more-btn\"\n//                   onClick={loadMore}\n//                   disabled={loadingMore}\n//                 >\n//                   {loadingMore ? (\n//                     <>\n//                       <div className=\"loading-spinner-small\"></div>\n//                       Loading...\n//                     </>\n//                   ) : (\n//                     `Load More (${pagination.total - bettingData.length} remaining)`\n//                   )}\n//                 </button>\n//               </div>\n//             )}\n//             {/* Loading More State */}\n//             {loadingMore && (\n//               <div className=\"loading-more-state\">\n//                 <div className=\"loading-spinner-small\"></div>\n//                 <div className=\"loading-text\">Loading more records...</div>\n//               </div>\n//             )}\n//             {/* Empty State */}\n//             {!loading && bettingData.length === 0 && (\n//               <div className=\"empty-state\">\n//                 <div className=\"empty-icon\">\n//                   <span\n//                     className=\"item-icon\"\n//                     style={{\n//                       maskImage: 'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',\n//                       WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',\n//                     }}\n//                   ></span>\n//                 </div>\n//                 <div className=\"empty-text\">No betting records found</div>\n//                 <div className=\"empty-subtext\">\n//                   {activeTab === \"settled\"\n//                     ? \"You have no settled bets for the selected period.\"\n//                     : \"You have no unsettled bets for the selected period.\"}\n//                 </div>\n//                 <button\n//                   className=\"button button-outline\"\n//                   onClick={resetFilters}\n//                 >\n//                   Clear Filters\n//                 </button>\n//               </div>\n//             )}\n//             {/* Error State */}\n//             {!loading && bettingData.length === 0 && (\n//               <div className=\"empty-state\">\n//                 <div className=\"empty-icon\">\n//                   <span\n//                     className=\"item-icon\"\n//                     style={{\n//                       maskImage: 'url(\"/assets/images/icon-set/icon-error.svg\")',\n//                       WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-error.svg\")',\n//                     }}\n//                   ></span>\n//                 </div>\n//                 <div className=\"empty-text\">\n//                   No records match your filters\n//                 </div>\n//                 <button\n//                   className=\"button button-outline\"\n//                   onClick={resetFilters}\n//                 >\n//                   Clear Filters\n//                 </button>\n//               </div>\n//             )}\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n// export default BettingRecords;\nimport React,{useState,useEffect,useCallback}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{useApi}from\"../../../hooks/useApi\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BettingRecords=_ref=>{let{showError,showSuccess,showWarning,showInfo}=_ref;const navigate=useNavigate();const location=useLocation();const[activeTab,setActiveTab]=useState(\"settled\");const[showFilter,setShowFilter]=useState(false);const[loading,setLoading]=useState(false);const[loadingMore,setLoadingMore]=useState(false);const[hasMore,setHasMore]=useState(true);const{apiCall}=useApi();const closeModal=()=>{var _location$state;// যদি background location থাকে, তাহলে পূর্বের location-এ back করবে\n// নাহলে home page-এ navigate করবে\nif((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.background){navigate(-1);}else{navigate(\"/\");}};// Filter states\nconst[filters,setFilters]=useState({startDate:\"\",endDate:\"\",platforms:[],gameTypes:[],settlement:\"settled\",page:1,limit:20});const[availableFilters,setAvailableFilters]=useState({platforms:[],gameTypes:[],dateRange:{minDate:null,maxDate:null}});const[bettingData,setBettingData]=useState([]);const[pagination,setPagination]=useState({page:1,limit:20,total:0,pages:0});// Date options for quick selection\nconst dateOptions=[{value:\"today\",label:\"Today\"},{value:\"yesterday\",label:\"Yesterday\"},{value:\"last7days\",label:\"Last 7 days\"},{value:\"last30days\",label:\"Last 30 days\"}];const[selectedDateOption,setSelectedDateOption]=useState(\"last7days\");// Sample platforms from your HTML\nconst samplePlatforms=[\"MG\",\"KA\",\"TCGLOTTOSEA\",\"MAHA\",\"SABA\",\"JDB\",\"INJOY\",\"GTF\",\"P8\",\"YL\",\"DG\",\"HOTROAD\",\"RT\",\"SG\",\"FASTSPIN\",\"PT\",\"HORSEBOOK\",\"PINNACLE\",\"KM\",\"PP\",\"SEXY\",\"YELLOWBAT\",\"VIA\",\"FC\",\"JILI\",\"SV388\",\"CG\",\"BTG\",\"DRAGOONSOFT\",\"CREEDROOMZ\",\"SMARTSOFT\",\"NLC\",\"WINFINITY\",\"FIVEG\",\"COOLGAME\",\"RELAX\",\"OCTOPLAY\",\"CQ9\",\"PG\",\"NETENT\",\"PNG\",\"EVO\",\"RICH88\",\"WorldMatch\",\"BTi\",\"Joker\",\"JDBASPRIBE\",\"CRICKET\",\"SBO\",\"iNsports\",\"MONOPOLY\",\"CMD\",\"NextSpin\",\"Lucky365\"];// Sample game types from your HTML\nconst sampleGameTypes=[\"Slots\",\"Live Casino\",\"Sports\",\"Fishing\",\"Card\",\"E-sports\",\"Lottery\",\"P2P\",\"Table\",\"Arcade\",\"Cock Fighting\",\"Rain\",\"Crash\",\"Free\",\"Other\"];// Load available filters\nconst loadAvailableFilters=useCallback(async()=>{try{// Use sample data for now since backend might have issues\nsetAvailableFilters({platforms:samplePlatforms,gameTypes:sampleGameTypes,dateRange:{minDate:null,maxDate:null}});// Uncomment when backend is ready\n// const response = await apiCall(\"/api/game-list-filters\", \"GET\");\n// if (response.success) {\n//   setAvailableFilters(response.data || {});\n// }\n}catch(error){console.error(\"Error loading filters:\",error);// Use sample data as fallback\nsetAvailableFilters({platforms:samplePlatforms,gameTypes:sampleGameTypes,dateRange:{minDate:null,maxDate:null}});}},[apiCall]);// Load betting records\nconst loadBettingRecords=useCallback(async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let isLoadMore=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;try{if(isLoadMore){setLoadingMore(true);}else{setLoading(true);}const params={page,limit:filters.limit,settlement:activeTab,dateOption:selectedDateOption};// Add platform and game type filters if they exist\nif(filters.platforms.length>0){params.platforms=filters.platforms;}if(filters.gameTypes.length>0){params.gameTypes=filters.gameTypes;}console.log(\"Loading betting records with params:\",params);try{// Try to call the backend API\nconst response=await apiCall(\"/api/member/betting-records-simple\",\"GET\",params);if(response.success){var _response$data,_response$data2,_response$pagination;if(isLoadMore){setBettingData(prev=>[...prev,...response.data]);}else{setBettingData(response.data||[]);}setPagination(response.pagination||{page:page,limit:filters.limit,total:((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.length)||0,pages:Math.ceil((((_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.length)||0)/filters.limit)});setHasMore(page<(((_response$pagination=response.pagination)===null||_response$pagination===void 0?void 0:_response$pagination.pages)||1));}else{throw new Error(response.message||\"Failed to load betting records\");}}catch(apiError){console.log(\"API call failed, using sample data:\",apiError);// Use sample data if API fails\nconst sampleData=generateSampleData();if(isLoadMore){setBettingData(prev=>[...prev,...sampleData]);}else{setBettingData(sampleData);}setPagination({page:page,limit:filters.limit,total:sampleData.length*3,pages:3});setHasMore(page<3);if(isLoadMore){showSuccess(\"Loaded \".concat(sampleData.length,\" more records\"));}}}catch(error){console.error(\"Error loading betting records:\",error);showError(\"Failed to load betting records\");}finally{setLoading(false);setLoadingMore(false);}},[filters,activeTab,selectedDateOption,showError,showSuccess,apiCall]);// Generate sample data for demonstration\nconst generateSampleData=()=>{const platforms=[\"JILI\",\"PNG\",\"JDB\",\"PG\",\"CQ9\",\"EVO\"];const gameTypes=[\"Slot\",\"Live Casino\",\"Sports\",\"Fishing\"];return[{date:new Date().toISOString().split('T')[0],records:Array.from({length:6},(_,i)=>({_id:\"sample-\".concat(i,\"-\").concat(Date.now()),platform:platforms[i%platforms.length],gameType:gameTypes[i%gameTypes.length],turnover:Math.random()*1000+100,profitLoss:(Math.random()-0.5)*200,bet:Math.random()*500+50,payout:Math.random()*600+40,start_time:new Date()}))}];};// Initial load\nuseEffect(()=>{loadAvailableFilters();loadBettingRecords(1,false);},[]);// Reload when filters or tab change\nuseEffect(()=>{setBettingData([]);setPagination(prev=>_objectSpread(_objectSpread({},prev),{},{page:1}));loadBettingRecords(1,false);},[filters,activeTab,selectedDateOption]);// Handle tab change\nconst handleTabChange=tab=>{setActiveTab(tab);setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{settlement:tab,page:1}));};// Handle filter toggle\nconst toggleFilter=()=>{setShowFilter(!showFilter);};// Handle platform selection\nconst handlePlatformToggle=platform=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{platforms:prev.platforms.includes(platform)?prev.platforms.filter(p=>p!==platform):[...prev.platforms,platform],page:1}));};// Handle game type selection\nconst handleGameTypeToggle=gameType=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{gameTypes:prev.gameTypes.includes(gameType)?prev.gameTypes.filter(g=>g!==gameType):[...prev.gameTypes,gameType],page:1}));};// Handle date option change\nconst handleDateOptionChange=optionValue=>{setSelectedDateOption(optionValue);setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{page:1}));};// Select all platforms\nconst selectAllPlatforms=()=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{platforms:[...availableFilters.platforms],page:1}));};// Clear all platforms\nconst clearAllPlatforms=()=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{platforms:[],page:1}));};// Select all game types\nconst selectAllGameTypes=()=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{gameTypes:[...availableFilters.gameTypes],page:1}));};// Clear all game types\nconst clearAllGameTypes=()=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{gameTypes:[],page:1}));};// Apply filters and close filter panel\nconst applyFilters=()=>{setShowFilter(false);setBettingData([]);loadBettingRecords(1,false);showInfo(\"Filters applied successfully\");};// Reset filters\nconst resetFilters=()=>{setFilters({startDate:\"\",endDate:\"\",platforms:[],gameTypes:[],settlement:activeTab,page:1,limit:20});setSelectedDateOption(\"last7days\");showInfo(\"Filters reset to default\");};// Close filter panel\nconst closeFilter=()=>{setShowFilter(false);};// Load more records\nconst loadMore=()=>{if(!loadingMore&&hasMore){const nextPage=pagination.page+1;setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{page:nextPage}));loadBettingRecords(nextPage,true);}};// Format currency\nconst formatCurrency=amount=>{return new Intl.NumberFormat(\"en-US\",{minimumFractionDigits:2,maximumFractionDigits:2}).format(amount||0);};// Format date\nconst formatDate=dateString=>{try{const date=new Date(dateString);return date.toISOString().split('T')[0];}catch(error){return\"Invalid Date\";}};return/*#__PURE__*/_jsx(\"div\",{className:\"popup-page-main__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content mcd-style fixed-tab player-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab-btn-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"tab-btn tab-btn-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"line\",style:{width:\"calc(50%)\",transform:\"translate(\".concat(activeTab===\"settled\"?\"0%\":\"100%\",\", 0px)\")}}),/*#__PURE__*/_jsx(\"div\",{className:\"btn \".concat(activeTab===\"settled\"?\"active\":\"\"),onClick:()=>handleTabChange(\"settled\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"Settled\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"btn \".concat(activeTab===\"unsettled\"?\"\":\"\"),onClick:()=>handleTabChange(\"unsettled\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:\"Unsettled\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content tab-content-page\",children:[!showFilter&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab filter-tab\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"item-ani\",children:dateOptions.map(option=>/*#__PURE__*/_jsx(\"li\",{className:selectedDateOption===option.value?\"active\":\"\",onClick:()=>handleDateOptionChange(option.value),children:option.label},option.value))}),/*#__PURE__*/_jsx(\"div\",{className:\"btn search-btn\",onClick:toggleFilter,children:/*#__PURE__*/_jsx(\"span\",{className:\"item-icon\",style:{maskImage:'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',WebkitMaskImage:'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")'}})})]}),showFilter&&/*#__PURE__*/_jsxs(\"div\",{className:\"searchpage active\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-top-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"back\",onClick:closeFilter,children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-icon\",style:{maskImage:'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',WebkitMaskImage:'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")'}}),\"Back\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Betting Record Filter\",disabled:true,style:{backgroundImage:'url(\"\")'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchpage-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-checkbox-group check-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Platform (\",filters.platforms.length,\" selected)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"filter-action-btn\",onClick:selectAllPlatforms,children:\"Select All\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-action-btn\",onClick:clearAllPlatforms,children:\"Clear All\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:availableFilters.platforms.map(platform=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"platform-\".concat(platform),checked:filters.platforms.includes(platform),onChange:()=>handlePlatformToggle(platform)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"platform-\".concat(platform),children:platform})]},platform))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-checkbox-group check-group\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Game Type (\",filters.gameTypes.length,\" selected)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"filter-action-btn\",onClick:selectAllGameTypes,children:\"Select All\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-action-btn\",onClick:clearAllGameTypes,children:\"Clear All\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:availableFilters.gameTypes.map(gameType=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"gameType-\".concat(gameType),checked:filters.gameTypes.includes(gameType),onChange:()=>handleGameTypeToggle(gameType)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"gameType-\".concat(gameType),children:gameType})]},gameType))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-checkbox-group check-group\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"ul\",{children:dateOptions.map(option=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"date-\".concat(option.value),name:\"dateOption\",checked:selectedDateOption===option.value,onChange:()=>handleDateOptionChange(option.value)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date-\".concat(option.value),children:option.label})]},option.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"searchpage-bar active\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button button-secondary\",onClick:resetFilters,children:\"Reset\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:applyFilters,children:\"Confirm\"})]})]}),!showFilter&&/*#__PURE__*/_jsx(\"div\",{className:\"inner-wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inner-box\",children:[loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-text\",children:\"Loading betting records...\"})]}),!loading&&bettingData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"record-item item-title\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item platform\",children:\"Platform\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item type\",children:\"Game Type\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item bet\",children:\"Turnover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item profit\",children:\"Profit/Loss\"})]}),!loading&&bettingData.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"list list-betting-record\",children:bettingData.map((dayData,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"date-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"date-title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"date\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-icon\",style:{maskImage:'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',WebkitMaskImage:'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")'}}),formatDate(dayData.date)]}),/*#__PURE__*/_jsx(\"div\",{className:\"time-zone\",children:\"GMT+8\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-content\",children:dayData.records&&dayData.records.map((record,recordIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"record-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item platform\",children:record.platform}),/*#__PURE__*/_jsx(\"div\",{className:\"item type\",children:record.gameType}),/*#__PURE__*/_jsx(\"div\",{className:\"item bet\",children:formatCurrency(record.turnover)}),/*#__PURE__*/_jsxs(\"div\",{className:\"item profit \".concat(record.profitLoss>=0?\"positive\":\"negative\"),children:[record.profitLoss>=0?\"\":\"(\",formatCurrency(Math.abs(record.profitLoss)),record.profitLoss>=0?\"\":\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"list-arrow\",style:{maskImage:'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',WebkitMaskImage:'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")'}})]},record._id||recordIndex))})]},index))}),!loading&&hasMore&&bettingData.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"load-more-section\",children:/*#__PURE__*/_jsx(\"button\",{className:\"load-more-btn\",onClick:loadMore,disabled:loadingMore,children:loadingMore?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"}),\"Loading...\"]}):\"Load More Records\"})}),!loading&&bettingData.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:/*#__PURE__*/_jsx(\"span\",{className:\"item-icon\",style:{maskImage:'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',WebkitMaskImage:'url(\"/assets/images/icon-set/icon-empty-betting.svg\")'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"empty-text\",children:\"No betting records found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"empty-subtext\",children:activeTab===\"settled\"?\"You have no settled bets for the selected period.\":\"You have no unsettled bets for the selected period.\"})]})]})})]})]})});};export default BettingRecords;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useLocation","useApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BettingRecords","_ref","showError","showSuccess","showWarning","showInfo","navigate","location","activeTab","setActiveTab","showFilter","setShowFilter","loading","setLoading","loadingMore","setLoadingMore","hasMore","setHasMore","apiCall","closeModal","_location$state","state","background","filters","setFilters","startDate","endDate","platforms","gameTypes","settlement","page","limit","availableFilters","setAvailableFilters","dateRange","minDate","maxDate","bettingData","setBettingData","pagination","setPagination","total","pages","dateOptions","value","label","selectedDateOption","setSelectedDateOption","samplePlatforms","sampleGameTypes","loadAvailableFilters","error","console","loadBettingRecords","arguments","length","undefined","isLoadMore","params","dateOption","log","response","success","_response$data","_response$data2","_response$pagination","prev","data","Math","ceil","Error","message","apiError","sampleData","generateSampleData","concat","date","Date","toISOString","split","records","Array","from","_","i","_id","now","platform","gameType","turnover","random","profitLoss","bet","payout","start_time","_objectSpread","handleTabChange","tab","toggleFilter","handlePlatformToggle","includes","filter","p","handleGameTypeToggle","g","handleDateOptionChange","optionValue","selectAllPlatforms","clearAllPlatforms","selectAllGameTypes","clearAllGameTypes","applyFilters","resetFilters","closeFilter","loadMore","nextPage","formatCurrency","amount","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","formatDate","dateString","className","children","style","width","transform","onClick","map","option","maskImage","WebkitMaskImage","type","placeholder","disabled","backgroundImage","id","checked","onChange","htmlFor","name","dayData","index","record","recordIndex","abs"],"sources":["F:/mew png-71/my-app/src/components/member/BettingRecord/BettingRecords.jsx"],"sourcesContent":["// import React, { useState, useEffect, useCallback } from \"react\";\r\n// import { useNavigate, useLocation } from \"react-router-dom\";\r\n// import { useApi } from \"../../../hooks/useApi\";\r\n\r\n\r\n// const BettingRecords = ({ showError, showSuccess, showWarning, showInfo }) => {\r\n//   const navigate = useNavigate();\r\n//   const location = useLocation();\r\n//   const [activeTab, setActiveTab] = useState(\"settled\");\r\n//   const [showFilter, setShowFilter] = useState(false);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [loadingMore, setLoadingMore] = useState(false);\r\n//   const [hasMore, setHasMore] = useState(true);\r\n//   const { apiCall } = useApi();\r\n  \r\n//   // Filter states\r\n//   const [filters, setFilters] = useState({\r\n//     startDate: \"\",\r\n//     endDate: \"\",\r\n//     platforms: [],\r\n//     gameTypes: [],\r\n//     settlement: \"settled\",\r\n//     page: 1,\r\n//     limit: 2000,\r\n//   });\r\n\r\n//   const [availableFilters, setAvailableFilters] = useState({\r\n//     platforms: [],\r\n//     gameTypes: [],\r\n//     dateRange: { minDate: null, maxDate: null },\r\n//   });\r\n\r\n//   const [bettingData, setBettingData] = useState([]);\r\n//   const [pagination, setPagination] = useState({\r\n//     page: 1,\r\n//     limit: 2000,\r\n//     total: 0,\r\n//     pages: 0,\r\n//   });\r\n\r\n//   // Date options for quick selection\r\n//   const dateOptions = [\r\n//     {\r\n//       value: \"today\",\r\n//       label: \"Today\",\r\n//       getDate: () => {\r\n//         const today = new Date();\r\n//         return {\r\n//           startDate: today.toISOString().split(\"T\")[0],\r\n//           endDate: today.toISOString().split(\"T\")[0],\r\n//         };\r\n//       },\r\n//     },\r\n//     {\r\n//       value: \"yesterday\",\r\n//       label: \"Yesterday\",\r\n//       getDate: () => {\r\n//         const yesterday = new Date();\r\n//         yesterday.setDate(yesterday.getDate() - 1);\r\n//         return {\r\n//           startDate: yesterday.toISOString().split(\"T\")[0],\r\n//           endDate: yesterday.toISOString().split(\"T\")[0],\r\n//         };\r\n//       },\r\n//     },\r\n//     {\r\n//       value: \"last7days\",\r\n//       label: \"Last 7 days\",\r\n//       getDate: () => {\r\n//         const endDate = new Date();\r\n//         const startDate = new Date();\r\n//         startDate.setDate(startDate.getDate() - 6);\r\n//         return {\r\n//           startDate: startDate.toISOString().split(\"T\")[0],\r\n//           endDate: endDate.toISOString().split(\"T\")[0],\r\n//         };\r\n//       },\r\n//     },\r\n//     {\r\n//       value: \"last30days\",\r\n//       label: \"Last 30 days\",\r\n//       getDate: () => {\r\n//         const endDate = new Date();\r\n//         const startDate = new Date();\r\n//         startDate.setDate(startDate.getDate() - 29);\r\n//         return {\r\n//           startDate: startDate.toISOString().split(\"T\")[0],\r\n//           endDate: endDate.toISOString().split(\"T\")[0],\r\n//         };\r\n//       },\r\n//     },\r\n//   ];\r\n\r\n//   const [selectedDateOption, setSelectedDateOption] = useState(\"last7days\");\r\n\r\n//   // Load available filters\r\n//   const loadAvailableFilters = useCallback(async () => {\r\n//     try {\r\n//       const response = await apiCall(\"/game-list-filters\", \"GET\");\r\n//       console.log(\"GamesProvidersPage category result\", response.data);\r\n\r\n//       if (response.success) {\r\n//         setAvailableFilters(response.data || {});\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Error loading filters:\", error);\r\n//       showError(\"Failed to load filters\");\r\n//     }\r\n//   }, [apiCall, showError]);\r\n\r\n//   // Load betting records\r\n//   const loadBettingRecords = useCallback(\r\n//     async (page = 1, isLoadMore = false) => {\r\n//       try {\r\n//         if (isLoadMore) {\r\n//           setLoadingMore(true);\r\n//         } else {\r\n//           setLoading(true);\r\n//         }\r\n\r\n//         const params = {\r\n//           page,\r\n//           limit: filters.limit,\r\n//           settlement: activeTab,\r\n//         };\r\n\r\n//         // Add platform and game type filters if they exist\r\n//         if (filters.platforms.length > 0) {\r\n//           params.platforms = filters.platforms;\r\n//         }\r\n\r\n//         if (filters.gameTypes.length > 0) {\r\n//           params.gameTypes = filters.gameTypes;\r\n//         }\r\n\r\n//         // Apply date filter based on selected option\r\n//         if (selectedDateOption && dateOptions.find((opt) => opt.value === selectedDateOption)) {\r\n//           const dateOption = dateOptions.find(\r\n//             (opt) => opt.value === selectedDateOption\r\n//           );\r\n//           const dates = dateOption.getDate();\r\n//           params.startDate = dates.startDate;\r\n//           params.endDate = dates.endDate;\r\n//         }\r\n\r\n//         console.log(\"Loading betting records with params:\", params);\r\n\r\n//         // Use the correct endpoint for betting records\r\n//         const response = await apiCall(\"/betting-history\", \"GET\", params);\r\n\r\n//         if (response.success) {\r\n//           if (isLoadMore) {\r\n//             setBettingData((prev) => [...prev, ...response.data]);\r\n//           } else {\r\n//             setBettingData(response.data || []);\r\n//           }\r\n          \r\n//           setPagination(response.pagination || {\r\n//             page: page,\r\n//             limit: filters.limit,\r\n//             total: response.data?.length || 0,\r\n//             pages: Math.ceil((response.data?.length || 0) / filters.limit)\r\n//           });\r\n          \r\n//           setHasMore(page < (response.pagination?.pages || 1));\r\n          \r\n//           if (isLoadMore) {\r\n//             showSuccess(`Loaded ${response.data?.length || 0} more records`);\r\n//           }\r\n//         } else {\r\n//           showError(response.message || \"Failed to load betting records\");\r\n//         }\r\n//       } catch (error) {\r\n//         console.error(\"Error loading betting records:\", error);\r\n//         showError(\"Failed to load betting records\");\r\n//       } finally {\r\n//         setLoading(false);\r\n//         setLoadingMore(false);\r\n//       }\r\n//     },\r\n//     [filters, activeTab, selectedDateOption, showError, showSuccess, apiCall, dateOptions]\r\n//   );\r\n\r\n//   // Initial load\r\n//   useEffect(() => {\r\n//     loadAvailableFilters();\r\n//     loadBettingRecords(1, false);\r\n//   }, []);\r\n\r\n//   // Reload when filters or tab change\r\n//   useEffect(() => {\r\n//     setBettingData([]);\r\n//     setPagination(prev => ({ ...prev, page: 1 }));\r\n//     loadBettingRecords(1, false);\r\n//   }, [filters, activeTab, selectedDateOption]);\r\n\r\n//   // Handle tab change\r\n//   const handleTabChange = (tab) => {\r\n//     setActiveTab(tab);\r\n//     setFilters((prev) => ({ ...prev, settlement: tab, page: 1 }));\r\n//   };\r\n\r\n//   // Handle filter toggle\r\n//   const toggleFilter = () => {\r\n//     setShowFilter(!showFilter);\r\n//   };\r\n\r\n//   // Handle platform selection\r\n//   const handlePlatformToggle = (platform) => {\r\n//     setFilters((prev) => ({\r\n//       ...prev,\r\n//       platforms: prev.platforms.includes(platform)\r\n//         ? prev.platforms.filter((p) => p !== platform)\r\n//         : [...prev.platforms, platform],\r\n//       page: 1,\r\n//     }));\r\n//   };\r\n\r\n//   // Handle game type selection\r\n//   const handleGameTypeToggle = (gameType) => {\r\n//     setFilters((prev) => ({\r\n//       ...prev,\r\n//       gameTypes: prev.gameTypes.includes(gameType)\r\n//         ? prev.gameTypes.filter((g) => g !== gameType)\r\n//         : [...prev.gameTypes, gameType],\r\n//       page: 1,\r\n//     }));\r\n//   };\r\n\r\n//   // Handle date option change\r\n//   const handleDateOptionChange = (optionValue) => {\r\n//     setSelectedDateOption(optionValue);\r\n//     setFilters((prev) => ({ ...prev, page: 1 }));\r\n//   };\r\n\r\n//   // Select all platforms\r\n//   const selectAllPlatforms = () => {\r\n//     setFilters(prev => ({\r\n//       ...prev,\r\n//       platforms: [...availableFilters.platforms],\r\n//       page: 1\r\n//     }));\r\n//   };\r\n\r\n//   // Clear all platforms\r\n//   const clearAllPlatforms = () => {\r\n//     setFilters(prev => ({\r\n//       ...prev,\r\n//       platforms: [],\r\n//       page: 1\r\n//     }));\r\n//   };\r\n\r\n//   // Select all game types\r\n//   const selectAllGameTypes = () => {\r\n//     setFilters(prev => ({\r\n//       ...prev,\r\n//       gameTypes: [...availableFilters.gameTypes],\r\n//       page: 1\r\n//     }));\r\n//   };\r\n\r\n//   // Clear all game types\r\n//   const clearAllGameTypes = () => {\r\n//     setFilters(prev => ({\r\n//       ...prev,\r\n//       gameTypes: [],\r\n//       page: 1\r\n//     }));\r\n//   };\r\n\r\n//   // Apply filters and close filter panel\r\n//   const applyFilters = () => {\r\n//     setShowFilter(false);\r\n//     setBettingData([]);\r\n//     loadBettingRecords(1, false);\r\n//     showInfo(\"Filters applied successfully\");\r\n//   };\r\n\r\n//   // Reset filters\r\n//   const resetFilters = () => {\r\n//     setFilters({\r\n//       startDate: \"\",\r\n//       endDate: \"\",\r\n//       platforms: [],\r\n//       gameTypes: [],\r\n//       settlement: activeTab,\r\n//       page: 1,\r\n//       limit: 200,\r\n//     });\r\n//     setSelectedDateOption(\"last7days\");\r\n//     showInfo(\"Filters reset to default\");\r\n//   };\r\n\r\n//   // Close filter panel\r\n//   const closeFilter = () => {\r\n//     setShowFilter(false);\r\n//   };\r\n\r\n//   // Load more records\r\n//   const loadMore = () => {\r\n//     if (!loadingMore && hasMore) {\r\n//       const nextPage = pagination.page + 1;\r\n//       setFilters(prev => ({ ...prev, page: nextPage }));\r\n//       loadBettingRecords(nextPage, true);\r\n//     }\r\n//   };\r\n\r\n//   // Format currency\r\n//   const formatCurrency = (amount) => {\r\n//     return new Intl.NumberFormat(\"en-US\", {\r\n//       minimumFractionDigits: 2,\r\n//       maximumFractionDigits: 2,\r\n//     }).format(amount || 0);\r\n//   };\r\n\r\n//   // Format date\r\n//   const formatDate = (dateString) => {\r\n//     try {\r\n//       const date = new Date(dateString);\r\n//       return date.toLocaleDateString(\"en-US\", {\r\n//         year: \"numeric\",\r\n//         month: \"short\",\r\n//         day: \"numeric\",\r\n//       });\r\n//     } catch (error) {\r\n//       return \"Invalid Date\";\r\n//     }\r\n//   };\r\n\r\n//   // Calculate total stats for a date group\r\n//   const calculateDateGroupStats = (records) => {\r\n//     const totals = records.reduce((acc, record) => ({\r\n//       turnover: acc.turnover + (record.turnover || 0),\r\n//       profitLoss: acc.profitLoss + (record.profitLoss || 0),\r\n//       bet: acc.bet + (record.bet || 0),\r\n//       payout: acc.payout + (record.payout || 0),\r\n//     }), { turnover: 0, profitLoss: 0, bet: 0, payout: 0 });\r\n\r\n//     return totals;\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"member-content betting-records-page fixed-tab player-content\">\r\n//       {/* Header Section */}\r\n//       <div className=\"page-header\">\r\n//         <div className=\"header-content\">\r\n//           <h1 className=\"page-title\">Betting Records</h1>\r\n//           <div className=\"header-stats\">\r\n//             <div className=\"stat-item\">\r\n//               <span className=\"stat-label\">Total Records:</span>\r\n//               <span className=\"stat-value\">{pagination.total}</span>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Tab Navigation */}\r\n//       <div className=\"tab-btn-section\">\r\n//         <div className=\"tab-btn tab-btn-page\">\r\n//           <div\r\n//             className=\"line\"\r\n//             style={{\r\n//               width: \"calc(50%)\",\r\n//               transform: `translate(${\r\n//                 activeTab === \"settled\" ? \"0%\" : \"100%\"\r\n//               }, 0px)`,\r\n//             }}\r\n//           ></div>\r\n//           <div\r\n//             className={`btn ${activeTab === \"settled\" ? \"active\" : \"\"}`}\r\n//             onClick={() => handleTabChange(\"settled\")}\r\n//           >\r\n//             <div className=\"text\">Settled</div>\r\n//           </div>\r\n//           <div\r\n//             className={`btn ${activeTab === \"unsettled\" ? \"active\" : \"\"}`}\r\n//             onClick={() => handleTabChange(\"unsettled\")}\r\n//           >\r\n//             <div className=\"text\">Unsettled</div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Filter Tab */}\r\n//       <div className=\"tab filter-tab\">\r\n//         <ul className=\"item-ani\">\r\n//           {dateOptions.map((option) => (\r\n//             <li\r\n//               key={option.value}\r\n//               className={selectedDateOption === option.value ? \"active\" : \"\"}\r\n//               onClick={() => handleDateOptionChange(option.value)}\r\n//             >\r\n//               {option.label}\r\n//             </li>\r\n//           ))}\r\n//         </ul>\r\n//         <div className=\"btn search-btn\" onClick={toggleFilter}>\r\n//           <span\r\n//             className=\"item-icon\"\r\n//             style={{\r\n//               maskImage: 'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',\r\n//               WebkitMaskImage: 'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',\r\n//             }}\r\n//           ></span>\r\n//           <span className=\"filter-badge\">\r\n//             {filters.platforms.length + filters.gameTypes.length > 0 ? \r\n//               filters.platforms.length + filters.gameTypes.length : ''}\r\n//           </span>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Filter Panel */}\r\n//       {showFilter && (\r\n//         <div className=\"searchpage active\">\r\n//           <div className=\"search-top-info\">\r\n//             <div className=\"back\" onClick={closeFilter}>\r\n//               <span\r\n//                 className=\"item-icon\"\r\n//                 style={{\r\n//                   maskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n//                   WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n//                 }}\r\n//               ></span>\r\n//               Back\r\n//             </div>\r\n//             <input\r\n//               type=\"text\"\r\n//               placeholder=\"Betting Record Filter\"\r\n//               disabled\r\n//               style={{ backgroundImage: 'url(\"\")' }}\r\n//             />\r\n//           </div>\r\n\r\n//           <div className=\"searchpage-main\">\r\n//             {/* Platforms Filter */}\r\n//             <div className=\"search-checkbox-group check-group\">\r\n//               <div className=\"filter-header\">\r\n//                 <h2>Platform ({filters.platforms.length} selected)</h2>\r\n//                 <div className=\"filter-actions\">\r\n//                   <button className=\"filter-action-btn\" onClick={selectAllPlatforms}>\r\n//                     Select All\r\n//                   </button>\r\n//                   <button className=\"filter-action-btn\" onClick={clearAllPlatforms}>\r\n//                     Clear All\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//               <ul>\r\n//                 {availableFilters.platforms && availableFilters.platforms.map((platform) => (\r\n//                   <li key={platform}>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       id={`platform-${platform}`}\r\n//                       checked={filters.platforms.includes(platform)}\r\n//                       onChange={() => handlePlatformToggle(platform)}\r\n//                     />\r\n//                     <label htmlFor={`platform-${platform}`}>{platform}</label>\r\n//                   </li>\r\n//                 ))}\r\n//               </ul>\r\n//             </div>\r\n\r\n//             {/* Game Types Filter */}\r\n//             <div className=\"search-checkbox-group check-group\">\r\n//               <div className=\"filter-header\">\r\n//                 <h2>Game Type ({filters.gameTypes.length} selected)</h2>\r\n//                 <div className=\"filter-actions\">\r\n//                   <button className=\"filter-action-btn\" onClick={selectAllGameTypes}>\r\n//                     Select All\r\n//                   </button>\r\n//                   <button className=\"filter-action-btn\" onClick={clearAllGameTypes}>\r\n//                     Clear All\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//               <ul>\r\n//                 {availableFilters.gameTypes && availableFilters.gameTypes.map((gameType) => (\r\n//                   <li key={gameType}>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       id={`gameType-${gameType}`}\r\n//                       checked={filters.gameTypes.includes(gameType)}\r\n//                       onChange={() => handleGameTypeToggle(gameType)}\r\n//                     />\r\n//                     <label htmlFor={`gameType-${gameType}`}>{gameType}</label>\r\n//                   </li>\r\n//                 ))}\r\n//               </ul>\r\n//             </div>\r\n\r\n//             {/* Date Filter */}\r\n//             <div className=\"search-checkbox-group check-group\">\r\n//               <h2>Date Range</h2>\r\n//               <ul>\r\n//                 {dateOptions.map((option) => (\r\n//                   <li key={option.value}>\r\n//                     <input\r\n//                       type=\"radio\"\r\n//                       id={`date-${option.value}`}\r\n//                       name=\"dateOption\"\r\n//                       checked={selectedDateOption === option.value}\r\n//                       onChange={() => handleDateOptionChange(option.value)}\r\n//                     />\r\n//                     <label htmlFor={`date-${option.value}`}>{option.label}</label>\r\n//                   </li>\r\n//                 ))}\r\n//               </ul>\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"searchpage-bar active\">\r\n//             <button className=\"button button-secondary\" onClick={resetFilters}>\r\n//               Reset\r\n//             </button>\r\n//             <button className=\"button\" onClick={applyFilters}>\r\n//               Confirm\r\n//             </button>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Betting Records Content */}\r\n//       {!showFilter && (\r\n//         <div className=\"inner-wrap\">\r\n//           <div className=\"inner-box\">\r\n//             {/* Loading State */}\r\n//             {loading && (\r\n//               <div className=\"loading-state\">\r\n//                 <div className=\"loading-spinner\"></div>\r\n//                 <div className=\"loading-text\">Loading betting records...</div>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Active Filters Summary */}\r\n//             {!loading && (filters.platforms.length > 0 || filters.gameTypes.length > 0) && (\r\n//               <div className=\"active-filters\">\r\n//                 <div className=\"filters-summary\">\r\n//                   <span className=\"filters-label\">Active Filters:</span>\r\n//                   {filters.platforms.length > 0 && (\r\n//                     <div className=\"filter-tag\">\r\n//                       Platforms: {filters.platforms.join(\", \")}\r\n//                       <button \r\n//                         className=\"filter-tag-remove\"\r\n//                         onClick={() => setFilters(prev => ({ ...prev, platforms: [] }))}\r\n//                       >\r\n//                         ×\r\n//                       </button>\r\n//                     </div>\r\n//                   )}\r\n//                   {filters.gameTypes.length > 0 && (\r\n//                     <div className=\"filter-tag\">\r\n//                       Game Types: {filters.gameTypes.join(\", \")}\r\n//                       <button \r\n//                         className=\"filter-tag-remove\"\r\n//                         onClick={() => setFilters(prev => ({ ...prev, gameTypes: [] }))}\r\n//                       >\r\n//                         ×\r\n//                       </button>\r\n//                     </div>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Table Header */}\r\n//             {!loading && bettingData.length > 0 && (\r\n//               <div className=\"record-item item-title\">\r\n//                 <div className=\"item platform\">Platform</div>\r\n//                 <div className=\"item type\">Game Type</div>\r\n//                 <div className=\"item bet\">Turnover</div>\r\n//                 <div className=\"item profit\">Profit/Loss</div>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Betting Records List */}\r\n//             {!loading && bettingData.length > 0 && (\r\n//               <div className=\"list list-betting-record\">\r\n//                 {bettingData.map((dayData, index) => {\r\n//                   const dayStats = calculateDateGroupStats(dayData.records || []);\r\n//                   return (\r\n//                     <div key={index} className=\"date-group\">\r\n//                       <div className=\"date-title\">\r\n//                         <div className=\"date\">\r\n//                           <span\r\n//                             className=\"item-icon\"\r\n//                             style={{\r\n//                               maskImage: 'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',\r\n//                               WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',\r\n//                             }}\r\n//                           ></span>\r\n//                           {formatDate(dayData.date)}\r\n//                         </div>\r\n//                         <div className=\"date-stats\">\r\n//                           <span className=\"stat\">Turnover: {formatCurrency(dayStats.turnover)}</span>\r\n//                           <span className={`stat ${dayStats.profitLoss >= 0 ? 'positive' : 'negative'}`}>\r\n//                             P/L: {formatCurrency(dayStats.profitLoss)}\r\n//                           </span>\r\n//                         </div>\r\n//                         <div className=\"time-zone\">GMT+8</div>\r\n//                       </div>\r\n\r\n//                       <div className=\"list-content\">\r\n//                         {dayData.records && dayData.records.map((record, recordIndex) => (\r\n//                           <div\r\n//                             key={record._id || recordIndex}\r\n//                             className=\"record-item\"\r\n//                             onClick={() => showInfo(`Platform: ${record.platform} | Game: ${record.gameType}`)}\r\n//                           >\r\n//                             <div className=\"item platform\">\r\n//                               <span className=\"platform-name\">{record.platform}</span>\r\n//                             </div>\r\n//                             <div className=\"item type\">\r\n//                               <span className=\"game-type\">{record.gameType}</span>\r\n//                             </div>\r\n//                             <div className=\"item bet\">\r\n//                               {formatCurrency(record.turnover)}\r\n//                             </div>\r\n//                             <div\r\n//                               className={`item profit ${\r\n//                                 record.profitLoss >= 0 ? \"positive\" : \"negative\"\r\n//                               }`}\r\n//                             >\r\n//                               {record.profitLoss >= 0 ? \"+\" : \"-\"}\r\n//                               {formatCurrency(Math.abs(record.profitLoss))}\r\n//                             </div>\r\n//                             <div\r\n//                               className=\"list-arrow\"\r\n//                               style={{\r\n//                                 maskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n//                                 WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n//                               }}\r\n//                             ></div>\r\n//                           </div>\r\n//                         ))}\r\n//                       </div>\r\n//                     </div>\r\n//                   );\r\n//                 })}\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Load More Button */}\r\n//             {!loading && hasMore && bettingData.length > 0 && (\r\n//               <div className=\"load-more-section\">\r\n//                 <button\r\n//                   className=\"load-more-btn\"\r\n//                   onClick={loadMore}\r\n//                   disabled={loadingMore}\r\n//                 >\r\n//                   {loadingMore ? (\r\n//                     <>\r\n//                       <div className=\"loading-spinner-small\"></div>\r\n//                       Loading...\r\n//                     </>\r\n//                   ) : (\r\n//                     `Load More (${pagination.total - bettingData.length} remaining)`\r\n//                   )}\r\n//                 </button>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Loading More State */}\r\n//             {loadingMore && (\r\n//               <div className=\"loading-more-state\">\r\n//                 <div className=\"loading-spinner-small\"></div>\r\n//                 <div className=\"loading-text\">Loading more records...</div>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Empty State */}\r\n//             {!loading && bettingData.length === 0 && (\r\n//               <div className=\"empty-state\">\r\n//                 <div className=\"empty-icon\">\r\n//                   <span\r\n//                     className=\"item-icon\"\r\n//                     style={{\r\n//                       maskImage: 'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',\r\n//                       WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',\r\n//                     }}\r\n//                   ></span>\r\n//                 </div>\r\n//                 <div className=\"empty-text\">No betting records found</div>\r\n//                 <div className=\"empty-subtext\">\r\n//                   {activeTab === \"settled\"\r\n//                     ? \"You have no settled bets for the selected period.\"\r\n//                     : \"You have no unsettled bets for the selected period.\"}\r\n//                 </div>\r\n//                 <button\r\n//                   className=\"button button-outline\"\r\n//                   onClick={resetFilters}\r\n//                 >\r\n//                   Clear Filters\r\n//                 </button>\r\n//               </div>\r\n//             )}\r\n\r\n//             {/* Error State */}\r\n//             {!loading && bettingData.length === 0 && (\r\n//               <div className=\"empty-state\">\r\n//                 <div className=\"empty-icon\">\r\n//                   <span\r\n//                     className=\"item-icon\"\r\n//                     style={{\r\n//                       maskImage: 'url(\"/assets/images/icon-set/icon-error.svg\")',\r\n//                       WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-error.svg\")',\r\n//                     }}\r\n//                   ></span>\r\n//                 </div>\r\n//                 <div className=\"empty-text\">\r\n//                   No records match your filters\r\n//                 </div>\r\n//                 <button\r\n//                   className=\"button button-outline\"\r\n//                   onClick={resetFilters}\r\n//                 >\r\n//                   Clear Filters\r\n//                 </button>\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default BettingRecords;\r\n\r\n\r\n\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useApi } from \"../../../hooks/useApi\";\r\n\r\n\r\nconst BettingRecords = ({ showError, showSuccess, showWarning, showInfo }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [activeTab, setActiveTab] = useState(\"settled\");\r\n  const [showFilter, setShowFilter] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const { apiCall } = useApi();\r\n    const closeModal = () => {\r\n    // যদি background location থাকে, তাহলে পূর্বের location-এ back করবে\r\n    // নাহলে home page-এ navigate করবে\r\n    if (location.state?.background) {\r\n      navigate(-1);\r\n    } else {\r\n      navigate(\"/\");\r\n    }\r\n  };\r\n  // Filter states\r\n  const [filters, setFilters] = useState({\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n    platforms: [],\r\n    gameTypes: [],\r\n    settlement: \"settled\",\r\n    page: 1,\r\n    limit: 20,\r\n  });\r\n\r\n  const [availableFilters, setAvailableFilters] = useState({\r\n    platforms: [],\r\n    gameTypes: [],\r\n    dateRange: { minDate: null, maxDate: null },\r\n  });\r\n\r\n  const [bettingData, setBettingData] = useState([]);\r\n  const [pagination, setPagination] = useState({\r\n    page: 1,\r\n    limit: 20,\r\n    total: 0,\r\n    pages: 0,\r\n  });\r\n\r\n  // Date options for quick selection\r\n  const dateOptions = [\r\n    { value: \"today\", label: \"Today\" },\r\n    { value: \"yesterday\", label: \"Yesterday\" },\r\n    { value: \"last7days\", label: \"Last 7 days\" },\r\n    { value: \"last30days\", label: \"Last 30 days\" },\r\n  ];\r\n\r\n  const [selectedDateOption, setSelectedDateOption] = useState(\"last7days\");\r\n\r\n  // Sample platforms from your HTML\r\n  const samplePlatforms = [\r\n    \"MG\", \"KA\", \"TCGLOTTOSEA\", \"MAHA\", \"SABA\", \"JDB\", \"INJOY\", \"GTF\", \"P8\", \"YL\",\r\n    \"DG\", \"HOTROAD\", \"RT\", \"SG\", \"FASTSPIN\", \"PT\", \"HORSEBOOK\", \"PINNACLE\", \"KM\", \"PP\",\r\n    \"SEXY\", \"YELLOWBAT\", \"VIA\", \"FC\", \"JILI\", \"SV388\", \"CG\", \"BTG\", \"DRAGOONSOFT\", \"CREEDROOMZ\",\r\n    \"SMARTSOFT\", \"NLC\", \"WINFINITY\", \"FIVEG\", \"COOLGAME\", \"RELAX\", \"OCTOPLAY\", \"CQ9\", \"PG\",\r\n    \"NETENT\", \"PNG\", \"EVO\", \"RICH88\", \"WorldMatch\", \"BTi\", \"Joker\", \"JDBASPRIBE\", \"CRICKET\", \"SBO\",\r\n    \"iNsports\", \"MONOPOLY\", \"CMD\", \"NextSpin\", \"Lucky365\"\r\n  ];\r\n\r\n  // Sample game types from your HTML\r\n  const sampleGameTypes = [\r\n    \"Slots\", \"Live Casino\", \"Sports\", \"Fishing\", \"Card\", \"E-sports\", \"Lottery\", \r\n    \"P2P\", \"Table\", \"Arcade\", \"Cock Fighting\", \"Rain\", \"Crash\", \"Free\", \"Other\"\r\n  ];\r\n\r\n  // Load available filters\r\n  const loadAvailableFilters = useCallback(async () => {\r\n    try {\r\n      // Use sample data for now since backend might have issues\r\n      setAvailableFilters({\r\n        platforms: samplePlatforms,\r\n        gameTypes: sampleGameTypes,\r\n        dateRange: { minDate: null, maxDate: null }\r\n      });\r\n      \r\n      // Uncomment when backend is ready\r\n      // const response = await apiCall(\"/api/game-list-filters\", \"GET\");\r\n      // if (response.success) {\r\n      //   setAvailableFilters(response.data || {});\r\n      // }\r\n    } catch (error) {\r\n      console.error(\"Error loading filters:\", error);\r\n      // Use sample data as fallback\r\n      setAvailableFilters({\r\n        platforms: samplePlatforms,\r\n        gameTypes: sampleGameTypes,\r\n        dateRange: { minDate: null, maxDate: null }\r\n      });\r\n    }\r\n  }, [apiCall]);\r\n\r\n  // Load betting records\r\n  const loadBettingRecords = useCallback(\r\n    async (page = 1, isLoadMore = false) => {\r\n      try {\r\n        if (isLoadMore) {\r\n          setLoadingMore(true);\r\n        } else {\r\n          setLoading(true);\r\n        }\r\n\r\n        const params = {\r\n          page,\r\n          limit: filters.limit,\r\n          settlement: activeTab,\r\n          dateOption: selectedDateOption\r\n        };\r\n\r\n        // Add platform and game type filters if they exist\r\n        if (filters.platforms.length > 0) {\r\n          params.platforms = filters.platforms;\r\n        }\r\n\r\n        if (filters.gameTypes.length > 0) {\r\n          params.gameTypes = filters.gameTypes;\r\n        }\r\n\r\n        console.log(\"Loading betting records with params:\", params);\r\n\r\n        try {\r\n          // Try to call the backend API\r\n          const response = await apiCall(\"/api/member/betting-records-simple\", \"GET\", params);\r\n          \r\n          if (response.success) {\r\n            if (isLoadMore) {\r\n              setBettingData((prev) => [...prev, ...response.data]);\r\n            } else {\r\n              setBettingData(response.data || []);\r\n            }\r\n            \r\n            setPagination(response.pagination || {\r\n              page: page,\r\n              limit: filters.limit,\r\n              total: response.data?.length || 0,\r\n              pages: Math.ceil((response.data?.length || 0) / filters.limit)\r\n            });\r\n            \r\n            setHasMore(page < (response.pagination?.pages || 1));\r\n          } else {\r\n            throw new Error(response.message || \"Failed to load betting records\");\r\n          }\r\n        } catch (apiError) {\r\n          console.log(\"API call failed, using sample data:\", apiError);\r\n          // Use sample data if API fails\r\n          const sampleData = generateSampleData();\r\n          if (isLoadMore) {\r\n            setBettingData((prev) => [...prev, ...sampleData]);\r\n          } else {\r\n            setBettingData(sampleData);\r\n          }\r\n          \r\n          setPagination({\r\n            page: page,\r\n            limit: filters.limit,\r\n            total: sampleData.length * 3,\r\n            pages: 3\r\n          });\r\n          \r\n          setHasMore(page < 3);\r\n          \r\n          if (isLoadMore) {\r\n            showSuccess(`Loaded ${sampleData.length} more records`);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error loading betting records:\", error);\r\n        showError(\"Failed to load betting records\");\r\n      } finally {\r\n        setLoading(false);\r\n        setLoadingMore(false);\r\n      }\r\n    },\r\n    [filters, activeTab, selectedDateOption, showError, showSuccess, apiCall]\r\n  );\r\n\r\n  // Generate sample data for demonstration\r\n  const generateSampleData = () => {\r\n    const platforms = [\"JILI\", \"PNG\", \"JDB\", \"PG\", \"CQ9\", \"EVO\"];\r\n    const gameTypes = [\"Slot\", \"Live Casino\", \"Sports\", \"Fishing\"];\r\n    \r\n    return [{\r\n      date: new Date().toISOString().split('T')[0],\r\n      records: Array.from({ length: 6 }, (_, i) => ({\r\n        _id: `sample-${i}-${Date.now()}`,\r\n        platform: platforms[i % platforms.length],\r\n        gameType: gameTypes[i % gameTypes.length],\r\n        turnover: Math.random() * 1000 + 100,\r\n        profitLoss: (Math.random() - 0.5) * 200,\r\n        bet: Math.random() * 500 + 50,\r\n        payout: Math.random() * 600 + 40,\r\n        start_time: new Date()\r\n      }))\r\n    }];\r\n  };\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    loadAvailableFilters();\r\n    loadBettingRecords(1, false);\r\n  }, []);\r\n\r\n  // Reload when filters or tab change\r\n  useEffect(() => {\r\n    setBettingData([]);\r\n    setPagination(prev => ({ ...prev, page: 1 }));\r\n    loadBettingRecords(1, false);\r\n  }, [filters, activeTab, selectedDateOption]);\r\n\r\n  // Handle tab change\r\n  const handleTabChange = (tab) => {\r\n    setActiveTab(tab);\r\n    setFilters((prev) => ({ ...prev, settlement: tab, page: 1 }));\r\n  };\r\n\r\n  // Handle filter toggle\r\n  const toggleFilter = () => {\r\n    setShowFilter(!showFilter);\r\n  };\r\n\r\n  // Handle platform selection\r\n  const handlePlatformToggle = (platform) => {\r\n    setFilters((prev) => ({\r\n      ...prev,\r\n      platforms: prev.platforms.includes(platform)\r\n        ? prev.platforms.filter((p) => p !== platform)\r\n        : [...prev.platforms, platform],\r\n      page: 1,\r\n    }));\r\n  };\r\n\r\n  // Handle game type selection\r\n  const handleGameTypeToggle = (gameType) => {\r\n    setFilters((prev) => ({\r\n      ...prev,\r\n      gameTypes: prev.gameTypes.includes(gameType)\r\n        ? prev.gameTypes.filter((g) => g !== gameType)\r\n        : [...prev.gameTypes, gameType],\r\n      page: 1,\r\n    }));\r\n  };\r\n\r\n  // Handle date option change\r\n  const handleDateOptionChange = (optionValue) => {\r\n    setSelectedDateOption(optionValue);\r\n    setFilters((prev) => ({ ...prev, page: 1 }));\r\n  };\r\n\r\n  // Select all platforms\r\n  const selectAllPlatforms = () => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      platforms: [...availableFilters.platforms],\r\n      page: 1\r\n    }));\r\n  };\r\n\r\n  // Clear all platforms\r\n  const clearAllPlatforms = () => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      platforms: [],\r\n      page: 1\r\n    }));\r\n  };\r\n\r\n  // Select all game types\r\n  const selectAllGameTypes = () => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      gameTypes: [...availableFilters.gameTypes],\r\n      page: 1\r\n    }));\r\n  };\r\n\r\n  // Clear all game types\r\n  const clearAllGameTypes = () => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      gameTypes: [],\r\n      page: 1\r\n    }));\r\n  };\r\n\r\n  // Apply filters and close filter panel\r\n  const applyFilters = () => {\r\n    setShowFilter(false);\r\n    setBettingData([]);\r\n    loadBettingRecords(1, false);\r\n    showInfo(\"Filters applied successfully\");\r\n  };\r\n\r\n  // Reset filters\r\n  const resetFilters = () => {\r\n    setFilters({\r\n      startDate: \"\",\r\n      endDate: \"\",\r\n      platforms: [],\r\n      gameTypes: [],\r\n      settlement: activeTab,\r\n      page: 1,\r\n      limit: 20,\r\n    });\r\n    setSelectedDateOption(\"last7days\");\r\n    showInfo(\"Filters reset to default\");\r\n  };\r\n\r\n  // Close filter panel\r\n  const closeFilter = () => {\r\n    setShowFilter(false);\r\n  };\r\n\r\n  // Load more records\r\n  const loadMore = () => {\r\n    if (!loadingMore && hasMore) {\r\n      const nextPage = pagination.page + 1;\r\n      setFilters(prev => ({ ...prev, page: nextPage }));\r\n      loadBettingRecords(nextPage, true);\r\n    }\r\n  };\r\n\r\n  // Format currency\r\n  const formatCurrency = (amount) => {\r\n    return new Intl.NumberFormat(\"en-US\", {\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount || 0);\r\n  };\r\n\r\n  // Format date\r\n  const formatDate = (dateString) => {\r\n    try {\r\n      const date = new Date(dateString);\r\n      return date.toISOString().split('T')[0];\r\n    } catch (error) {\r\n      return \"Invalid Date\";\r\n    }\r\n  };\r\n\r\n  return (\r\n  <div className=\"popup-page-main__container\">\r\n            <div className=\"content mcd-style fixed-tab player-content\">\r\n              \r\n              {/* Tab Navigation */}\r\n              <div className=\"tab-btn-section\">\r\n                <div className=\"tab-btn tab-btn-page\">\r\n                  <div\r\n                    className=\"line\"\r\n                    style={{\r\n                      width: \"calc(50%)\",\r\n                      transform: `translate(${activeTab === \"settled\" ? \"0%\" : \"100%\"}, 0px)`,\r\n                    }}\r\n                  ></div>\r\n                  <div\r\n                    className={`btn ${activeTab === \"settled\" ? \"active\" : \"\"}`}\r\n                    onClick={() => handleTabChange(\"settled\")}\r\n                  >\r\n                    <div className=\"text\">Settled</div>\r\n                  </div>\r\n                  <div\r\n                    className={`btn ${activeTab === \"unsettled\" ? \"\" : \"\"}`}\r\n                    onClick={() => handleTabChange(\"unsettled\")}\r\n                  >\r\n                    <div className=\"text\">Unsettled</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"tab-content tab-content-page\">\r\n                \r\n                {/* Filter Tab */}\r\n                {!showFilter && (\r\n                  <div className=\"tab filter-tab\">\r\n                    <ul className=\"item-ani\">\r\n                      {dateOptions.map((option) => (\r\n                        <li\r\n                          key={option.value}\r\n                          className={selectedDateOption === option.value ? \"active\" : \"\"}\r\n                          onClick={() => handleDateOptionChange(option.value)}\r\n                        >\r\n                          {option.label}\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                    <div className=\"btn search-btn\" onClick={toggleFilter}>\r\n                      <span\r\n                        className=\"item-icon\"\r\n                        style={{\r\n                          maskImage: 'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',\r\n                          WebkitMaskImage: 'url(\"/assets/images/icon-set/index-theme-icon/games-filter-icon.svg\")',\r\n                        }}\r\n                      ></span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Filter Panel */}\r\n                {showFilter && (\r\n                  <div className=\"searchpage active\">\r\n                    <div className=\"search-top-info\">\r\n                      <div className=\"back\" onClick={closeFilter}>\r\n                        <span\r\n                          className=\"item-icon\"\r\n                          style={{\r\n                            maskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n                            WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n                          }}\r\n                        ></span>\r\n                        Back\r\n                      </div>\r\n                      <input\r\n                        type=\"text\"\r\n                        placeholder=\"Betting Record Filter\"\r\n                        disabled\r\n                        style={{ backgroundImage: 'url(\"\")' }}\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"searchpage-main\">\r\n                      {/* Platforms Filter */}\r\n                      <div className=\"search-checkbox-group check-group\">\r\n                        <h2>Platform ({filters.platforms.length} selected)</h2>\r\n                        <div className=\"filter-actions\">\r\n                          <button className=\"filter-action-btn\" onClick={selectAllPlatforms}>\r\n                            Select All\r\n                          </button>\r\n                          <button className=\"filter-action-btn\" onClick={clearAllPlatforms}>\r\n                            Clear All\r\n                          </button>\r\n                        </div>\r\n                        <ul>\r\n                          {availableFilters.platforms.map((platform) => (\r\n                            <li key={platform}>\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                id={`platform-${platform}`}\r\n                                checked={filters.platforms.includes(platform)}\r\n                                onChange={() => handlePlatformToggle(platform)}\r\n                              />\r\n                              <label htmlFor={`platform-${platform}`}>{platform}</label>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n\r\n                      {/* Game Types Filter */}\r\n                      <div className=\"search-checkbox-group check-group\">\r\n                        <h2>Game Type ({filters.gameTypes.length} selected)</h2>\r\n                        <div className=\"filter-actions\">\r\n                          <button className=\"filter-action-btn\" onClick={selectAllGameTypes}>\r\n                            Select All\r\n                          </button>\r\n                          <button className=\"filter-action-btn\" onClick={clearAllGameTypes}>\r\n                            Clear All\r\n                          </button>\r\n                        </div>\r\n                        <ul>\r\n                          {availableFilters.gameTypes.map((gameType) => (\r\n                            <li key={gameType}>\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                id={`gameType-${gameType}`}\r\n                                checked={filters.gameTypes.includes(gameType)}\r\n                                onChange={() => handleGameTypeToggle(gameType)}\r\n                              />\r\n                              <label htmlFor={`gameType-${gameType}`}>{gameType}</label>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n\r\n                      {/* Date Filter */}\r\n                      <div className=\"search-checkbox-group check-group\">\r\n                        <h2>Date</h2>\r\n                        <ul>\r\n                          {dateOptions.map((option) => (\r\n                            <li key={option.value}>\r\n                              <input\r\n                                type=\"radio\"\r\n                                id={`date-${option.value}`}\r\n                                name=\"dateOption\"\r\n                                checked={selectedDateOption === option.value}\r\n                                onChange={() => handleDateOptionChange(option.value)}\r\n                              />\r\n                              <label htmlFor={`date-${option.value}`}>{option.label}</label>\r\n                            </li>\r\n                          ))}\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"searchpage-bar active\">\r\n                      <button className=\"button button-secondary\" onClick={resetFilters}>\r\n                        Reset\r\n                      </button>\r\n                      <button className=\"button\" onClick={applyFilters}>\r\n                        Confirm\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Betting Records Content */}\r\n                {!showFilter && (\r\n                  <div className=\"inner-wrap\">\r\n                    <div className=\"inner-box\">\r\n                      {/* Loading State */}\r\n                      {loading && (\r\n                        <div className=\"loading-state\">\r\n                          <div className=\"loading-spinner\"></div>\r\n                          <div className=\"loading-text\">Loading betting records...</div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Table Header */}\r\n                      {!loading && bettingData.length > 0 && (\r\n                        <div className=\"record-item item-title\">\r\n                          <div className=\"item platform\">Platform</div>\r\n                          <div className=\"item type\">Game Type</div>\r\n                          <div className=\"item bet\">Turnover</div>\r\n                          <div className=\"item profit\">Profit/Loss</div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Betting Records List */}\r\n                      {!loading && bettingData.length > 0 && (\r\n                        <div className=\"list list-betting-record\">\r\n                          {bettingData.map((dayData, index) => (\r\n                            <div key={index} className=\"date-group\">\r\n                              <div className=\"date-title\">\r\n                                <div className=\"date\">\r\n                                  <span\r\n                                    className=\"item-icon\"\r\n                                    style={{\r\n                                      maskImage: 'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',\r\n                                      WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-calendar-type02.svg\")',\r\n                                    }}\r\n                                  ></span>\r\n                                  {formatDate(dayData.date)}\r\n                                </div>\r\n                                <div className=\"time-zone\">GMT+8</div>\r\n                              </div>\r\n\r\n                              <div className=\"list-content\">\r\n                                {dayData.records && dayData.records.map((record, recordIndex) => (\r\n                                  <div\r\n                                    key={record._id || recordIndex}\r\n                                    className=\"record-item\"\r\n                                  >\r\n                                    <div className=\"item platform\">{record.platform}</div>\r\n                                    <div className=\"item type\">{record.gameType}</div>\r\n                                    <div className=\"item bet\">\r\n                                      {formatCurrency(record.turnover)}\r\n                                    </div>\r\n                                    <div\r\n                                      className={`item profit ${record.profitLoss >= 0 ? \"positive\" : \"negative\"}`}\r\n                                    >\r\n                                      {record.profitLoss >= 0 ? \"\" : \"(\"}\r\n                                      {formatCurrency(Math.abs(record.profitLoss))}\r\n                                      {record.profitLoss >= 0 ? \"\" : \")\"}\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"list-arrow\"\r\n                                      style={{\r\n                                        maskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n                                        WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-arrow-type09.svg\")',\r\n                                      }}\r\n                                    ></div>\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Load More Button */}\r\n                      {!loading && hasMore && bettingData.length > 0 && (\r\n                        <div className=\"load-more-section\">\r\n                          <button\r\n                            className=\"load-more-btn\"\r\n                            onClick={loadMore}\r\n                            disabled={loadingMore}\r\n                          >\r\n                            {loadingMore ? (\r\n                              <>\r\n                                <div className=\"loading-spinner-small\"></div>\r\n                                Loading...\r\n                              </>\r\n                            ) : (\r\n                              \"Load More Records\"\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Empty State */}\r\n                      {!loading && bettingData.length === 0 && (\r\n                        <div className=\"empty-state\">\r\n                          <div className=\"empty-icon\">\r\n                            <span\r\n                              className=\"item-icon\"\r\n                              style={{\r\n                                maskImage: 'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',\r\n                                WebkitMaskImage: 'url(\"/assets/images/icon-set/icon-empty-betting.svg\")',\r\n                              }}\r\n                            ></span>\r\n                          </div>\r\n                          <div className=\"empty-text\">No betting records found</div>\r\n                          <div className=\"empty-subtext\">\r\n                            {activeTab === \"settled\"\r\n                              ? \"You have no settled bets for the selected period.\"\r\n                              : \"You have no unsettled bets for the selected period.\"}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n  );\r\n};\r\n\r\nexport default BettingRecords;"],"mappings":"yGAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,MAAM,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAG/C,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAuD,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}