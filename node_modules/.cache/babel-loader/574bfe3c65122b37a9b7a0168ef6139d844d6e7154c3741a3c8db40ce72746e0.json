{"ast":null,"code":"var _s = $RefreshSig$();\n// // hooks/useGameData.js\n// import { useState, useEffect } from 'react';\n// import { useApi } from './useApi';\n\n// export const useGameData = (initialUrl = \"https://api.png71.live/api/games/New-table-Games-with-Providers\") => {\n//   const [data, setData] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(null);\n//   const [active, setActive] = useState(null);\n//   const [activeIndex, setActiveIndex] = useState(0);\n//   const { apiCall } = useApi();\n//   const fetchGameData = async (url = initialUrl) => {\n//     setLoading(true);\n//     setError(null);\n\n//     try {\n//       const response = await fetch(url, {\n//         method: \"GET\",\n//         headers: {\n//           \"Content-Type\": \"application/json\",\n//         },\n//       });\n\n//       if (!response.ok) {\n//         throw new Error(`HTTP error! status: ${response.status}`);\n//       }\n\n//       const result = await response.json();\n//       console.log(result)\n//       setData(result.data);\n\n//       // Set initial active state\n//       if (result.length > 0) {\n//         setActive(result[0]?.category);\n//         setActiveIndex(0);\n//       }\n\n//       return result;\n//     } catch (err) {\n//       console.error(\"Error fetching game data:\", err);\n//       setError(\"গেম ডেটা লোড করতে সমস্যা হচ্ছে\");\n//       throw err;\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchGameData();\n//   }, []);\n\n//   const [gameData, setGameData] = useState([]);\n\n//   const fetchGames = async (category_name) => {\n\n//     try {\n//       setLoading(true);\n//       // const providerParam = selectedProvider === \"ALL\"\n//       //   ? \"\"\n//       //   : Array.isArray(selectedProvider)\n//       //     ? selectedProvider.join(\",\")\n//       //     : selectedProvider;\n\n//       const result = await apiCall(\n//         \"/New-Games-with-Providers-By-Category\",\n//         \"GET\",\n//         {\n//           category_name: category_name,\n//         }\n//       );\n\n//       console.log(\"GET GamesProvidersPage result:\", result);\n\n//       setGameData(result.data || []);\n\n//     } catch (error) {\n//       console.error(\"Error fetching games:\", error);\n\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (active && activeIndex > 2) {\n//       fetchGames(active.category_name);\n//     }\n\n//   }, [active, activeIndex]);\n\n//   useEffect(() => {\n//     if (data.length > 0) {\n//       setActive(data[0]?.category);\n//       setActiveIndex(0); // Reset index when data changes\n//     }\n//   }, [data]);\n\n//   const handleItemClick = (index, item) => {\n//     setActiveIndex(index);\n//     setActive(item ? item : data[0]?.category?.uniqueProviders);\n//   };\n\n//   const refetch = () => {\n//     return fetchGameData();\n//   };\n\n//   const setActiveCategory = (categoryName) => {\n//     const categoryIndex = data.findIndex(\n//       item => item?.category?.name === categoryName\n//     );\n//     if (categoryIndex !== -1) {\n//       setActiveIndex(categoryIndex);\n//       setActive(data[categoryIndex]?.category);\n//     }\n//   };\n\n//   return {\n//     data,\n//     loading,\n//     error,\n//     active,\n//     activeIndex,\n//     handleItemClick,\n//     setActiveCategory,\n//     refetch,\n//     setActive,\n//     setActiveIndex,\n//     gameData\n//   };\n// };\n\n// hooks/useGameData.js\nimport { useState, useEffect } from 'react';\nimport { useApi } from './useApi';\nimport { apiService } from '../services/api';\nexport const useGameData = category_name => {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [active, setActive] = useState(null);\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [gameData, setGameData] = useState([]);\n  const fetchGameData = async category_name => {\n    setLoading(true);\n    setError(null);\n    try {\n      setLoading(true);\n      const result = await apiService.get(\"/api/games/New-table-Games-with-Providers\", \"GET\", {\n        category_name: category_name\n      });\n      console.log(\"GamesProvidersPage category result\", result.data);\n      if (result.success) {\n        setData(result.data[0] || {});\n      }\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchGames = async (category_name, page, providerParam, searchQuery, sortOption) => {\n    if (!category_name || loading || !hasMore) return;\n    try {\n      // setLoading(true);\n      const result = await apiService.get(\"/api/games/New-Games-with-Providers-By-Category\", \"GET\", {\n        category_name: category_name,\n        page: page,\n        provider: providerParam,\n        gameName: searchQuery,\n        sortBy: sortOption\n      });\n      console.log(\"GET GamesProvidersPage result:\", result);\n      setGameData(result.data || []);\n    } catch (error) {\n      console.error(\"Error fetching games:\", error);\n      // } finally {\n      //   setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchGameData();\n  }, []);\n\n  // Fetch games when active category changes\n  useEffect(() => {\n    if (active && active.category_name) {\n      fetchGames(active.category_name || \"\");\n    }\n  }, [active, data]);\n  console.log(data);\n  // Set initial active category when data loads\n  useEffect(() => {\n    if (data.length > 0 && !active) {\n      setActive(data[0]);\n      setActiveIndex(0);\n    }\n  }, [data, active]);\n  const handleItemClick = (index, item) => {\n    setActiveIndex(index);\n    setActive((item === null || item === void 0 ? void 0 : item.category) || item);\n  };\n  const refetch = () => {\n    return fetchGameData();\n  };\n  const setActiveCategory = categoryName => {\n    const categoryIndex = data.findIndex(item => {\n      var _item$category;\n      return (item === null || item === void 0 ? void 0 : (_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.name) === categoryName;\n    });\n    if (categoryIndex !== -1) {\n      var _data$categoryIndex;\n      setActiveIndex(categoryIndex);\n      setActive((_data$categoryIndex = data[categoryIndex]) === null || _data$categoryIndex === void 0 ? void 0 : _data$categoryIndex.category);\n    }\n  };\n  return {\n    data,\n    loading,\n    error,\n    active,\n    activeIndex,\n    handleItemClick,\n    setActiveCategory,\n    refetch,\n    setActive,\n    setActiveIndex,\n    gameData\n  };\n};\n_s(useGameData, \"0A9iV/H1g7Tg0zouRA8VUNnbs+w=\");","map":{"version":3,"names":["useState","useEffect","useApi","apiService","useGameData","category_name","_s","data","setData","loading","setLoading","error","setError","active","setActive","activeIndex","setActiveIndex","gameData","setGameData","fetchGameData","result","get","console","log","success","fetchGames","page","providerParam","searchQuery","sortOption","hasMore","provider","gameName","sortBy","length","handleItemClick","index","item","category","refetch","setActiveCategory","categoryName","categoryIndex","findIndex","_item$category","name","_data$categoryIndex"],"sources":["F:/png71/my-app/src/hooks/useGameData.js"],"sourcesContent":["// // hooks/useGameData.js\r\n// import { useState, useEffect } from 'react';\r\n// import { useApi } from './useApi';\r\n\r\n// export const useGameData = (initialUrl = \"https://api.png71.live/api/games/New-table-Games-with-Providers\") => {\r\n//   const [data, setData] = useState([]);\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [error, setError] = useState(null);\r\n//   const [active, setActive] = useState(null);\r\n//   const [activeIndex, setActiveIndex] = useState(0);\r\n//   const { apiCall } = useApi();\r\n//   const fetchGameData = async (url = initialUrl) => {\r\n//     setLoading(true);\r\n//     setError(null);\r\n\r\n//     try {\r\n//       const response = await fetch(url, {\r\n//         method: \"GET\",\r\n//         headers: {\r\n//           \"Content-Type\": \"application/json\",\r\n//         },\r\n//       });\r\n\r\n//       if (!response.ok) {\r\n//         throw new Error(`HTTP error! status: ${response.status}`);\r\n//       }\r\n\r\n//       const result = await response.json();\r\n//       console.log(result)\r\n//       setData(result.data);\r\n\r\n//       // Set initial active state\r\n//       if (result.length > 0) {\r\n//         setActive(result[0]?.category);\r\n//         setActiveIndex(0);\r\n//       }\r\n\r\n//       return result;\r\n//     } catch (err) {\r\n//       console.error(\"Error fetching game data:\", err);\r\n//       setError(\"গেম ডেটা লোড করতে সমস্যা হচ্ছে\");\r\n//       throw err;\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     fetchGameData();\r\n//   }, []);\r\n\r\n\r\n\r\n//   const [gameData, setGameData] = useState([]);\r\n\r\n\r\n//   const fetchGames = async (category_name) => {\r\n\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       // const providerParam = selectedProvider === \"ALL\"\r\n//       //   ? \"\"\r\n//       //   : Array.isArray(selectedProvider)\r\n//       //     ? selectedProvider.join(\",\")\r\n//       //     : selectedProvider;\r\n\r\n//       const result = await apiCall(\r\n//         \"/New-Games-with-Providers-By-Category\",\r\n//         \"GET\",\r\n//         {\r\n//           category_name: category_name,\r\n//         }\r\n//       );\r\n\r\n//       console.log(\"GET GamesProvidersPage result:\", result);\r\n\r\n\r\n//       setGameData(result.data || []);\r\n\r\n\r\n\r\n\r\n\r\n//     } catch (error) {\r\n//       console.error(\"Error fetching games:\", error);\r\n\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   useEffect(() => {\r\n//     if (active && activeIndex > 2) {\r\n//       fetchGames(active.category_name);\r\n//     }\r\n\r\n//   }, [active, activeIndex]);\r\n\r\n//   useEffect(() => {\r\n//     if (data.length > 0) {\r\n//       setActive(data[0]?.category);\r\n//       setActiveIndex(0); // Reset index when data changes\r\n//     }\r\n//   }, [data]);\r\n\r\n//   const handleItemClick = (index, item) => {\r\n//     setActiveIndex(index);\r\n//     setActive(item ? item : data[0]?.category?.uniqueProviders);\r\n//   };\r\n\r\n//   const refetch = () => {\r\n//     return fetchGameData();\r\n//   };\r\n\r\n//   const setActiveCategory = (categoryName) => {\r\n//     const categoryIndex = data.findIndex(\r\n//       item => item?.category?.name === categoryName\r\n//     );\r\n//     if (categoryIndex !== -1) {\r\n//       setActiveIndex(categoryIndex);\r\n//       setActive(data[categoryIndex]?.category);\r\n//     }\r\n//   };\r\n\r\n//   return {\r\n//     data,\r\n//     loading,\r\n//     error,\r\n//     active,\r\n//     activeIndex,\r\n//     handleItemClick,\r\n//     setActiveCategory,\r\n//     refetch,\r\n//     setActive,\r\n//     setActiveIndex,\r\n//     gameData\r\n//   };\r\n// };\r\n\r\n// hooks/useGameData.js\r\nimport { useState, useEffect } from 'react';\r\nimport { useApi } from './useApi';\r\nimport { apiService } from '../services/api';\r\n\r\nexport const useGameData = ( category_name) => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [active, setActive] = useState(null);\r\n  const [activeIndex, setActiveIndex] = useState(0);\r\n  const [gameData, setGameData] = useState([]);\r\n\r\n\r\n  const fetchGameData = async (category_name) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await apiService.get(\"/api/games/New-table-Games-with-Providers\", \"GET\", {\r\n        category_name: category_name,\r\n      });\r\n      console.log(\"GamesProvidersPage category result\", result.data);\r\n      if (result.success) {\r\n        setData(result.data[0] || {});\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching categories:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchGames = async (category_name,page,providerParam,searchQuery,sortOption) => {\r\n    if (!category_name || loading || !hasMore) return;\r\n\r\n    try {\r\n      // setLoading(true);\r\n      const result = await apiService.get(\r\n        \"/api/games/New-Games-with-Providers-By-Category\",\r\n        \"GET\",\r\n        {\r\n          category_name: category_name,\r\n          page: page,\r\n          provider: providerParam,\r\n          gameName: searchQuery,\r\n          sortBy: sortOption,\r\n        }\r\n      );\r\n\r\n      console.log(\"GET GamesProvidersPage result:\", result);\r\n      setGameData(result.data || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching games:\", error);\r\n      // } finally {\r\n      //   setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchGameData();\r\n  }, []);\r\n\r\n  // Fetch games when active category changes\r\n  useEffect(() => {\r\n    if (active && active.category_name) {\r\n      fetchGames(active.category_name || \"\");\r\n    }\r\n  }, [active, data]);\r\n\r\n  console.log(data)\r\n  // Set initial active category when data loads\r\n  useEffect(() => {\r\n    if (data.length > 0 && !active) {\r\n      setActive(data[0]);\r\n      setActiveIndex(0);\r\n    }\r\n  }, [data, active]);\r\n\r\n  const handleItemClick = (index, item) => {\r\n    setActiveIndex(index);\r\n    setActive(item?.category || item);\r\n  };\r\n\r\n  const refetch = () => {\r\n    return fetchGameData();\r\n  };\r\n\r\n  const setActiveCategory = (categoryName) => {\r\n    const categoryIndex = data.findIndex(\r\n      item => item?.category?.name === categoryName\r\n    );\r\n    if (categoryIndex !== -1) {\r\n      setActiveIndex(categoryIndex);\r\n      setActive(data[categoryIndex]?.category);\r\n    }\r\n  };\r\n\r\n  return {\r\n    data,\r\n    loading,\r\n    error,\r\n    active,\r\n    activeIndex,\r\n    handleItemClick,\r\n    setActiveCategory,\r\n    refetch,\r\n    setActive,\r\n    setActiveIndex,\r\n    gameData\r\n  };\r\n};"],"mappings":";AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAIA;;AAGA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;;AAMA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,UAAU,QAAQ,iBAAiB;AAE5C,OAAO,MAAMC,WAAW,GAAKC,aAAa,IAAK;EAAAC,EAAA;EAC7C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACe,WAAW,EAAEC,cAAc,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACiB,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAG5C,MAAMmB,aAAa,GAAG,MAAOd,aAAa,IAAK;IAC7CK,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACFF,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMU,MAAM,GAAG,MAAMjB,UAAU,CAACkB,GAAG,CAAC,2CAA2C,EAAE,KAAK,EAAE;QACtFhB,aAAa,EAAEA;MACjB,CAAC,CAAC;MACFiB,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEH,MAAM,CAACb,IAAI,CAAC;MAC9D,IAAIa,MAAM,CAACI,OAAO,EAAE;QAClBhB,OAAO,CAACY,MAAM,CAACb,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;MAC/B;IACF,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IACpD,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMe,UAAU,GAAG,MAAAA,CAAOpB,aAAa,EAACqB,IAAI,EAACC,aAAa,EAACC,WAAW,EAACC,UAAU,KAAK;IACpF,IAAI,CAACxB,aAAa,IAAII,OAAO,IAAI,CAACqB,OAAO,EAAE;IAE3C,IAAI;MACF;MACA,MAAMV,MAAM,GAAG,MAAMjB,UAAU,CAACkB,GAAG,CACjC,iDAAiD,EACjD,KAAK,EACL;QACEhB,aAAa,EAAEA,aAAa;QAC5BqB,IAAI,EAAEA,IAAI;QACVK,QAAQ,EAAEJ,aAAa;QACvBK,QAAQ,EAAEJ,WAAW;QACrBK,MAAM,EAAEJ;MACV,CACF,CAAC;MAEDP,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEH,MAAM,CAAC;MACrDF,WAAW,CAACE,MAAM,CAACb,IAAI,IAAI,EAAE,CAAC;IAChC,CAAC,CAAC,OAAOI,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7C;MACA;IACF;EACF,CAAC;EAEDV,SAAS,CAAC,MAAM;IACdkB,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAlB,SAAS,CAAC,MAAM;IACd,IAAIY,MAAM,IAAIA,MAAM,CAACR,aAAa,EAAE;MAClCoB,UAAU,CAACZ,MAAM,CAACR,aAAa,IAAI,EAAE,CAAC;IACxC;EACF,CAAC,EAAE,CAACQ,MAAM,EAAEN,IAAI,CAAC,CAAC;EAElBe,OAAO,CAACC,GAAG,CAAChB,IAAI,CAAC;EACjB;EACAN,SAAS,CAAC,MAAM;IACd,IAAIM,IAAI,CAAC2B,MAAM,GAAG,CAAC,IAAI,CAACrB,MAAM,EAAE;MAC9BC,SAAS,CAACP,IAAI,CAAC,CAAC,CAAC,CAAC;MAClBS,cAAc,CAAC,CAAC,CAAC;IACnB;EACF,CAAC,EAAE,CAACT,IAAI,EAAEM,MAAM,CAAC,CAAC;EAElB,MAAMsB,eAAe,GAAGA,CAACC,KAAK,EAAEC,IAAI,KAAK;IACvCrB,cAAc,CAACoB,KAAK,CAAC;IACrBtB,SAAS,CAAC,CAAAuB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,QAAQ,KAAID,IAAI,CAAC;EACnC,CAAC;EAED,MAAME,OAAO,GAAGA,CAAA,KAAM;IACpB,OAAOpB,aAAa,CAAC,CAAC;EACxB,CAAC;EAED,MAAMqB,iBAAiB,GAAIC,YAAY,IAAK;IAC1C,MAAMC,aAAa,GAAGnC,IAAI,CAACoC,SAAS,CAClCN,IAAI;MAAA,IAAAO,cAAA;MAAA,OAAI,CAAAP,IAAI,aAAJA,IAAI,wBAAAO,cAAA,GAAJP,IAAI,CAAEC,QAAQ,cAAAM,cAAA,uBAAdA,cAAA,CAAgBC,IAAI,MAAKJ,YAAY;IAAA,CAC/C,CAAC;IACD,IAAIC,aAAa,KAAK,CAAC,CAAC,EAAE;MAAA,IAAAI,mBAAA;MACxB9B,cAAc,CAAC0B,aAAa,CAAC;MAC7B5B,SAAS,EAAAgC,mBAAA,GAACvC,IAAI,CAACmC,aAAa,CAAC,cAAAI,mBAAA,uBAAnBA,mBAAA,CAAqBR,QAAQ,CAAC;IAC1C;EACF,CAAC;EAED,OAAO;IACL/B,IAAI;IACJE,OAAO;IACPE,KAAK;IACLE,MAAM;IACNE,WAAW;IACXoB,eAAe;IACfK,iBAAiB;IACjBD,OAAO;IACPzB,SAAS;IACTE,cAAc;IACdC;EACF,CAAC;AACH,CAAC;AAACX,EAAA,CA3GWF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}