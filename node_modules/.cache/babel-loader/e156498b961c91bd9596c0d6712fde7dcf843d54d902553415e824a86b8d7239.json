{"ast":null,"code":"import _objectSpread from\"F:/png71/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// services/api.js\nconst API_BASE_URL='https://kingbajiback-yavs.onrender.com/api';class ApiService{constructor(){this.token=null;}setToken(token){this.token=token;}async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=\"\".concat(API_BASE_URL).concat(endpoint);const headers=_objectSpread({'Content-Type':'application/json'},options.headers);if(this.token){headers['Authorization']=\"Bearer \".concat(this.token);}const config=_objectSpread(_objectSpread({},options),{},{headers});if(options.body&&typeof options.body==='object'&&!(options.body instanceof FormData)){config.body=JSON.stringify(options.body);}else if(options.body){config.body=options.body;}const response=await fetch(url,config);if(!response.ok||response.errCode===0){let errorMessage='API Error';try{const errorData=await response.json();errorMessage=errorData.message||errorMessage;}catch(_unused){// Ignore JSON parsing errors\n}console.log(\"User profile fetched:\",errorMessage);throw new Error(errorMessage);}return response.json();}get(endpoint,params){let url=endpoint;if(params&&typeof params===\"object\"){const queryString=new URLSearchParams(params).toString();url+=\"?\".concat(queryString);}return this.request(url,{method:'GET'});}post(endpoint,body){return this.request(endpoint,{method:'POST',body});}put(endpoint,body){return this.request(endpoint,{method:'PUT',body});}delete(endpoint){return this.request(endpoint,{method:'DELETE'});}async uploadFile(endpoint,formData){let onProgress=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;const headers={};if(this.token){headers['Authorization']=\"Bearer \".concat(this.token);}const xhr=new XMLHttpRequest();return new Promise((resolve,reject)=>{xhr.upload.addEventListener('progress',event=>{if(onProgress&&event.lengthComputable){const percentComplete=event.loaded/event.total*100;onProgress(percentComplete);}});xhr.addEventListener('load',()=>{if(xhr.status>=200&&xhr.status<300){try{const response=JSON.parse(xhr.responseText);resolve(response);}catch(error){reject(new Error('Invalid JSON response'));}}else{reject(new Error(\"Upload failed: \".concat(xhr.statusText)));}});xhr.addEventListener('error',()=>{reject(new Error('Upload failed'));});xhr.open('POST',\"\".concat(API_BASE_URL).concat(endpoint));xhr.setRequestHeader('Authorization',\"Bearer \".concat(this.token));xhr.send(formData);});}}export const apiService=new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","setToken","request","endpoint","options","arguments","length","undefined","url","concat","headers","_objectSpread","config","body","FormData","JSON","stringify","response","fetch","ok","errCode","errorMessage","errorData","json","message","_unused","console","log","Error","get","params","queryString","URLSearchParams","toString","method","post","put","delete","uploadFile","formData","onProgress","xhr","XMLHttpRequest","Promise","resolve","reject","upload","addEventListener","event","lengthComputable","percentComplete","loaded","total","status","parse","responseText","error","statusText","open","setRequestHeader","send","apiService"],"sources":["F:/png71/my-app/src/services/api.js"],"sourcesContent":["// services/api.js\r\nconst API_BASE_URL = 'https://kingbajiback-yavs.onrender.com/api';\r\n\r\nclass ApiService {\r\n  constructor() {\r\n    this.token = null;\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n  }\r\n\r\n  async request(endpoint, options = {}) {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    };\r\n\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    const config = {\r\n      ...options,\r\n      headers,\r\n    };\r\n\r\n    if (options.body && typeof options.body === 'object' && !(options.body instanceof FormData)) {\r\n      config.body = JSON.stringify(options.body);\r\n    } else if (options.body) {\r\n      config.body = options.body;\r\n    }\r\n\r\n    const response = await fetch(url, config);\r\n\r\n    if (!response.ok || response.errCode === 0) {\r\n      let errorMessage = 'API Error';\r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.message || errorMessage;\r\n      } catch {\r\n        // Ignore JSON parsing errors\r\n      }\r\n        console.log(\"User profile fetched:\", errorMessage);\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  get(endpoint, params) {\r\n    let url = endpoint;\r\n    if (params && typeof params === \"object\") {\r\n      const queryString = new URLSearchParams(params).toString();\r\n      url += `?${queryString}`;\r\n    }\r\n    return this.request(url, { method: 'GET' });\r\n  }\r\n\r\n  post(endpoint, body) {\r\n    return this.request(endpoint, { method: 'POST', body });\r\n  }\r\n\r\n  put(endpoint, body) {\r\n    return this.request(endpoint, { method: 'PUT', body });\r\n  }\r\n\r\n  delete(endpoint) {\r\n    return this.request(endpoint, { method: 'DELETE' });\r\n  }\r\n\r\n  async uploadFile(endpoint, formData, onProgress = null) {\r\n    const headers = {};\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    \r\n    return new Promise((resolve, reject) => {\r\n      xhr.upload.addEventListener('progress', (event) => {\r\n        if (onProgress && event.lengthComputable) {\r\n          const percentComplete = (event.loaded / event.total) * 100;\r\n          onProgress(percentComplete);\r\n        }\r\n      });\r\n\r\n      xhr.addEventListener('load', () => {\r\n        if (xhr.status >= 200 && xhr.status < 300) {\r\n          try {\r\n            const response = JSON.parse(xhr.responseText);\r\n            resolve(response);\r\n          } catch (error) {\r\n            reject(new Error('Invalid JSON response'));\r\n          }\r\n        } else {\r\n          reject(new Error(`Upload failed: ${xhr.statusText}`));\r\n        }\r\n      });\r\n\r\n      xhr.addEventListener('error', () => {\r\n        reject(new Error('Upload failed'));\r\n      });\r\n\r\n      xhr.open('POST', `${API_BASE_URL}${endpoint}`);\r\n      xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\r\n      xhr.send(formData);\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"oGAAA;AACA,KAAM,CAAAA,YAAY,CAAG,4CAA4C,CAEjE,KAAM,CAAAC,UAAW,CACfC,WAAWA,CAAA,CAAG,CACZ,IAAI,CAACC,KAAK,CAAG,IAAI,CACnB,CAEAC,QAAQA,CAACD,KAAK,CAAE,CACd,IAAI,CAACA,KAAK,CAAGA,KAAK,CACpB,CAEA,KAAM,CAAAE,OAAOA,CAACC,QAAQ,CAAgB,IAAd,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CAClC,KAAM,CAAAG,GAAG,IAAAC,MAAA,CAAMZ,YAAY,EAAAY,MAAA,CAAGN,QAAQ,CAAE,CACxC,KAAM,CAAAO,OAAO,CAAAC,aAAA,EACX,cAAc,CAAE,kBAAkB,EAC/BP,OAAO,CAACM,OAAO,CACnB,CAED,GAAI,IAAI,CAACV,KAAK,CAAE,CACdU,OAAO,CAAC,eAAe,CAAC,WAAAD,MAAA,CAAa,IAAI,CAACT,KAAK,CAAE,CACnD,CAEA,KAAM,CAAAY,MAAM,CAAAD,aAAA,CAAAA,aAAA,IACPP,OAAO,MACVM,OAAO,EACR,CAED,GAAIN,OAAO,CAACS,IAAI,EAAI,MAAO,CAAAT,OAAO,CAACS,IAAI,GAAK,QAAQ,EAAI,EAAET,OAAO,CAACS,IAAI,WAAY,CAAAC,QAAQ,CAAC,CAAE,CAC3FF,MAAM,CAACC,IAAI,CAAGE,IAAI,CAACC,SAAS,CAACZ,OAAO,CAACS,IAAI,CAAC,CAC5C,CAAC,IAAM,IAAIT,OAAO,CAACS,IAAI,CAAE,CACvBD,MAAM,CAACC,IAAI,CAAGT,OAAO,CAACS,IAAI,CAC5B,CAEA,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACV,GAAG,CAAEI,MAAM,CAAC,CAEzC,GAAI,CAACK,QAAQ,CAACE,EAAE,EAAIF,QAAQ,CAACG,OAAO,GAAK,CAAC,CAAE,CAC1C,GAAI,CAAAC,YAAY,CAAG,WAAW,CAC9B,GAAI,CACF,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CACvCF,YAAY,CAAGC,SAAS,CAACE,OAAO,EAAIH,YAAY,CAClD,CAAE,MAAAI,OAAA,CAAM,CACN;AAAA,CAEAC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEN,YAAY,CAAC,CACpD,KAAM,IAAI,CAAAO,KAAK,CAACP,YAAY,CAAC,CAC/B,CAEA,MAAO,CAAAJ,QAAQ,CAACM,IAAI,CAAC,CAAC,CACxB,CAEAM,GAAGA,CAAC1B,QAAQ,CAAE2B,MAAM,CAAE,CACpB,GAAI,CAAAtB,GAAG,CAAGL,QAAQ,CAClB,GAAI2B,MAAM,EAAI,MAAO,CAAAA,MAAM,GAAK,QAAQ,CAAE,CACxC,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAC,eAAe,CAACF,MAAM,CAAC,CAACG,QAAQ,CAAC,CAAC,CAC1DzB,GAAG,MAAAC,MAAA,CAAQsB,WAAW,CAAE,CAC1B,CACA,MAAO,KAAI,CAAC7B,OAAO,CAACM,GAAG,CAAE,CAAE0B,MAAM,CAAE,KAAM,CAAC,CAAC,CAC7C,CAEAC,IAAIA,CAAChC,QAAQ,CAAEU,IAAI,CAAE,CACnB,MAAO,KAAI,CAACX,OAAO,CAACC,QAAQ,CAAE,CAAE+B,MAAM,CAAE,MAAM,CAAErB,IAAK,CAAC,CAAC,CACzD,CAEAuB,GAAGA,CAACjC,QAAQ,CAAEU,IAAI,CAAE,CAClB,MAAO,KAAI,CAACX,OAAO,CAACC,QAAQ,CAAE,CAAE+B,MAAM,CAAE,KAAK,CAAErB,IAAK,CAAC,CAAC,CACxD,CAEAwB,MAAMA,CAAClC,QAAQ,CAAE,CACf,MAAO,KAAI,CAACD,OAAO,CAACC,QAAQ,CAAE,CAAE+B,MAAM,CAAE,QAAS,CAAC,CAAC,CACrD,CAEA,KAAM,CAAAI,UAAUA,CAACnC,QAAQ,CAAEoC,QAAQ,CAAqB,IAAnB,CAAAC,UAAU,CAAAnC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CACpD,KAAM,CAAAK,OAAO,CAAG,CAAC,CAAC,CAClB,GAAI,IAAI,CAACV,KAAK,CAAE,CACdU,OAAO,CAAC,eAAe,CAAC,WAAAD,MAAA,CAAa,IAAI,CAACT,KAAK,CAAE,CACnD,CAEA,KAAM,CAAAyC,GAAG,CAAG,GAAI,CAAAC,cAAc,CAAC,CAAC,CAEhC,MAAO,IAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtCJ,GAAG,CAACK,MAAM,CAACC,gBAAgB,CAAC,UAAU,CAAGC,KAAK,EAAK,CACjD,GAAIR,UAAU,EAAIQ,KAAK,CAACC,gBAAgB,CAAE,CACxC,KAAM,CAAAC,eAAe,CAAIF,KAAK,CAACG,MAAM,CAAGH,KAAK,CAACI,KAAK,CAAI,GAAG,CAC1DZ,UAAU,CAACU,eAAe,CAAC,CAC7B,CACF,CAAC,CAAC,CAEFT,GAAG,CAACM,gBAAgB,CAAC,MAAM,CAAE,IAAM,CACjC,GAAIN,GAAG,CAACY,MAAM,EAAI,GAAG,EAAIZ,GAAG,CAACY,MAAM,CAAG,GAAG,CAAE,CACzC,GAAI,CACF,KAAM,CAAApC,QAAQ,CAAGF,IAAI,CAACuC,KAAK,CAACb,GAAG,CAACc,YAAY,CAAC,CAC7CX,OAAO,CAAC3B,QAAQ,CAAC,CACnB,CAAE,MAAOuC,KAAK,CAAE,CACdX,MAAM,CAAC,GAAI,CAAAjB,KAAK,CAAC,uBAAuB,CAAC,CAAC,CAC5C,CACF,CAAC,IAAM,CACLiB,MAAM,CAAC,GAAI,CAAAjB,KAAK,mBAAAnB,MAAA,CAAmBgC,GAAG,CAACgB,UAAU,CAAE,CAAC,CAAC,CACvD,CACF,CAAC,CAAC,CAEFhB,GAAG,CAACM,gBAAgB,CAAC,OAAO,CAAE,IAAM,CAClCF,MAAM,CAAC,GAAI,CAAAjB,KAAK,CAAC,eAAe,CAAC,CAAC,CACpC,CAAC,CAAC,CAEFa,GAAG,CAACiB,IAAI,CAAC,MAAM,IAAAjD,MAAA,CAAKZ,YAAY,EAAAY,MAAA,CAAGN,QAAQ,CAAE,CAAC,CAC9CsC,GAAG,CAACkB,gBAAgB,CAAC,eAAe,WAAAlD,MAAA,CAAY,IAAI,CAACT,KAAK,CAAE,CAAC,CAC7DyC,GAAG,CAACmB,IAAI,CAACrB,QAAQ,CAAC,CACpB,CAAC,CAAC,CACJ,CACF,CAEA,MAAO,MAAM,CAAAsB,UAAU,CAAG,GAAI,CAAA/D,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}