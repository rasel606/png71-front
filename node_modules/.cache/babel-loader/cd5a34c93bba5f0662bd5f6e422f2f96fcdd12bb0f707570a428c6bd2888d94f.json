{"ast":null,"code":"import{apiService}from'./api';export const authService={register:async userData=>{return await apiService.post('/v1/createUser',userData);},login:async credentials=>{const response=await apiService.post('/v1/login_user',credentials);console.log(\"User profile fetched:\",response);if(response&&response.token){const token=response.token;localStorage.setItem('png71-user',token);apiService.setToken(token);}return response;},getProfile:async()=>{try{const response=await apiService.get('/v1/user_details');console.log(\"User profile fetched:\",response);// Handle different response structures\nif(response.data){return response.data;// If backend returns { success: true, data: user }\n}else if(response.user){return response.user;// If backend returns { user }\n}else{return response;// If backend returns user object directly\n}}catch(error){console.error(\"getProfile error:\",error);throw error;}},updateFullName:async fullName=>{try{const response=await apiService.put('/profile/full-name',{fullName});console.log(\"Update full name response:\",response);return response;}catch(error){console.error(\"Update full name error:\",error);throw error;}},updateBirthday:async birthday=>{try{const response=await apiService.put('/profile/birthday',{birthday});console.log(\"Update birthday response:\",response);return response;}catch(error){console.error(\"Update birthday error:\",error);throw error;}},// Check if name is already verified\ncheckNameVerificationStatus:async()=>{try{const profile=await authService.getProfile();return{isNameVerified:profile.isNameVerified||false,currentName:profile.name||''};}catch(error){console.error(\"Check name verification error:\",error);throw error;}},changePassword:async passwordData=>{try{const response=await apiService.put('/auth/change-password',passwordData);console.log(\"Change password response:\",response);return response;}catch(error){console.error(\"Change password error:\",error);throw error;}},logout:()=>{localStorage.removeItem('png71-user');apiService.setToken(null);},setToken:token=>{apiService.setToken(token);if(token){localStorage.setItem('png71-user',token);}else{localStorage.removeItem('png71-user');}},init(){const token=localStorage.getItem('png71-user');if(token){this.setToken(token);return token;}return null;}};export default authService;","map":{"version":3,"names":["apiService","authService","register","userData","post","login","credentials","response","console","log","token","localStorage","setItem","setToken","getProfile","get","data","user","error","updateFullName","fullName","put","updateBirthday","birthday","checkNameVerificationStatus","profile","isNameVerified","currentName","name","changePassword","passwordData","logout","removeItem","init","getItem"],"sources":["F:/png71/my-app/src/services/authServices.js"],"sourcesContent":["import { apiService } from './api';\r\n\r\nexport const authService = {\r\n  register: async (userData) => {\r\n    return await apiService.post('/v1/createUser', userData);\r\n  },\r\n\r\n  login: async (credentials) => {\r\n    const response = await apiService.post('/v1/login_user', credentials);\r\n  console.log(\"User profile fetched:\", response);\r\n    if (response && response.token) {\r\n      const token = response.token;\r\n      localStorage.setItem('png71-user', token);\r\n      apiService.setToken(token);\r\n    }\r\n\r\n    return response;\r\n  },\r\n \r\n\r\n  getProfile: async () => {\r\n    try {\r\n      const response = await apiService.get('/v1/user_details');\r\n  console.log(\"User profile fetched:\", response);\r\n      // Handle different response structures\r\n      if (response.data) {\r\n        return response.data; // If backend returns { success: true, data: user }\r\n      } else if (response.user) {\r\n        return response.user; // If backend returns { user }\r\n      } else {\r\n        return response; // If backend returns user object directly\r\n      }\r\n    } catch (error) {\r\n      console.error(\"getProfile error:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n  updateFullName: async (fullName) => {\r\n    try {\r\n      const response = await apiService.put('/profile/full-name', { fullName });\r\n      console.log(\"Update full name response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Update full name error:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n  updateBirthday: async (birthday) => {\r\n    try {\r\n      const response = await apiService.put('/profile/birthday', { birthday });\r\n      console.log(\"Update birthday response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Update birthday error:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Check if name is already verified\r\n  checkNameVerificationStatus: async () => {\r\n    try {\r\n      const profile = await authService.getProfile()\r\n      return {\r\n        isNameVerified: profile.isNameVerified || false,\r\n        currentName: profile.name || ''\r\n      };\r\n    } catch (error) {\r\n      console.error(\"Check name verification error:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n\r\n    changePassword: async (passwordData) => {\r\n    try {\r\n      const response = await apiService.put('/auth/change-password', passwordData);\r\n      console.log(\"Change password response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Change password error:\", error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  logout: () => {\r\n    localStorage.removeItem('png71-user');\r\n    apiService.setToken(null);\r\n  },\r\n\r\n  setToken: (token) => {\r\n    apiService.setToken(token);\r\n    if (token) {\r\n      localStorage.setItem('png71-user', token);\r\n    } else {\r\n      localStorage.removeItem('png71-user');\r\n    }\r\n  },\r\n\r\n  init() {\r\n    const token = localStorage.getItem('png71-user');\r\n    if (token) {\r\n      this.setToken(token);\r\n      return token;\r\n    }\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}