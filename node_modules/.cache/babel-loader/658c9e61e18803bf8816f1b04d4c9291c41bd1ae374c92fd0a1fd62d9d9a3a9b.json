{"ast":null,"code":"import{useState}from'react';const API_BASE='http://localhost:5000/api/games';export const useApi=()=>{const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const apiCall=async function(endpoint){let method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'GET';let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;setLoading(true);setError(null);try{const config={method,headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('png71-user'))}};if(data&&method!=='GET'){config.body=JSON.stringify(data);}const url=method==='GET'&&data?\"\".concat(API_BASE).concat(endpoint,\"?\").concat(new URLSearchParams(data)):\"\".concat(API_BASE).concat(endpoint);const response=await fetch(url,config);const result=await response.json();console.log(\"result\",result);if(!response.ok){throw new Error(result.errMsg||'API request failed');}return result;}catch(err){setError(err.message);throw err;}finally{setLoading(false);}};return{apiCall,loading,error};};","map":{"version":3,"names":["useState","API_BASE","useApi","loading","setLoading","error","setError","apiCall","endpoint","method","arguments","length","undefined","data","config","headers","concat","localStorage","getItem","body","JSON","stringify","url","URLSearchParams","response","fetch","result","json","console","log","ok","Error","errMsg","err","message"],"sources":["F:/mew png-71/my-app/src/hooks/useApi.js"],"sourcesContent":["import { useState } from 'react';\r\n\r\nconst API_BASE = 'http://localhost:5000/api/games';\r\n\r\nexport const useApi = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const apiCall = async (endpoint, method = 'GET', data = null) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const config = {\r\n        method,\r\n        headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('png71-user')}`,\r\n      },\r\n      };\r\n\r\n      if (data && method !== 'GET') {\r\n        config.body = JSON.stringify(data);\r\n      }\r\n\r\n      const url = method === 'GET' && data \r\n        ? `${API_BASE}${endpoint}?${new URLSearchParams(data)}`\r\n        : `${API_BASE}${endpoint}`;\r\n\r\n      const response = await fetch(url, config);\r\n      const result = await response.json();\r\nconsole.log(\"result\",result);\r\n      if (!response.ok) {\r\n        throw new Error(result.errMsg || 'API request failed');\r\n      }\r\n\r\n      return result;\r\n    } catch (err) {\r\n      setError(err.message);\r\n      throw err;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    apiCall,\r\n    loading,\r\n    error,\r\n  };\r\n};"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAEhC,KAAM,CAAAC,QAAQ,CAAG,iCAAiC,CAElD,MAAO,MAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGJ,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACK,KAAK,CAAEC,QAAQ,CAAC,CAAGN,QAAQ,CAAC,IAAI,CAAC,CAExC,KAAM,CAAAO,OAAO,CAAG,cAAAA,CAAOC,QAAQ,CAAkC,IAAhC,CAAAC,MAAM,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,KAAK,IAAE,CAAAG,IAAI,CAAAH,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC1DN,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CACF,KAAM,CAAAQ,MAAM,CAAG,CACbL,MAAM,CACNM,OAAO,CAAE,CACT,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC/D,CACA,CAAC,CAED,GAAIL,IAAI,EAAIJ,MAAM,GAAK,KAAK,CAAE,CAC5BK,MAAM,CAACK,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CACpC,CAEA,KAAM,CAAAS,GAAG,CAAGb,MAAM,GAAK,KAAK,EAAII,IAAI,IAAAG,MAAA,CAC7Bf,QAAQ,EAAAe,MAAA,CAAGR,QAAQ,MAAAQ,MAAA,CAAI,GAAI,CAAAO,eAAe,CAACV,IAAI,CAAC,KAAAG,MAAA,CAChDf,QAAQ,EAAAe,MAAA,CAAGR,QAAQ,CAAE,CAE5B,KAAM,CAAAgB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACH,GAAG,CAAER,MAAM,CAAC,CACzC,KAAM,CAAAY,MAAM,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAC1CC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAACH,MAAM,CAAC,CACtB,GAAI,CAACF,QAAQ,CAACM,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAACL,MAAM,CAACM,MAAM,EAAI,oBAAoB,CAAC,CACxD,CAEA,MAAO,CAAAN,MAAM,CACf,CAAE,MAAOO,GAAG,CAAE,CACZ3B,QAAQ,CAAC2B,GAAG,CAACC,OAAO,CAAC,CACrB,KAAM,CAAAD,GAAG,CACX,CAAC,OAAS,CACR7B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,MAAO,CACLG,OAAO,CACPJ,OAAO,CACPE,KACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}