{"ast":null,"code":"// // components/member/VerificationCode/VerificationCode.js\n// import React, { useState, useRef, useEffect } from 'react';\n// import { useNavigate, useLocation } from 'react-router-dom';\n// import { phoneVerificationService } from '../../../services/phoneVerificationService';\n// const VerificationCode = ({ showError, showSuccess, showWarning, showInfo }) => {\n//   const navigate = useNavigate();\n//   const location = useLocation();\n//   const [code, setCode] = useState(['', '', '', '']);\n//   const [isSubmitting, setIsSubmitting] = useState(false);\n// //   const [showSuccess, setShowSuccess] = useState(false);\n//   const [resendTime, setResendTime] = useState(285); // 4:45 in seconds\n//   const [canResend, setCanResend] = useState(false);\n//   const inputRefs = [\n//     useRef(null),\n//     useRef(null),\n//     useRef(null),\n//     useRef(null)\n//   ];\n//   // Get phone number from navigation state\n//   const phoneNumber = location.state?.phoneNumber || '+880 13******00';\n//   const maskedPhoneNumber = phoneNumber ? phoneNumber.replace(/(\\d{4})(\\d+)(\\d{2})/, '$1******$3') : '+880 13******00';\n//   // Timer for resend code\n//   useEffect(() => {\n//     const timer = setInterval(() => {\n//       setResendTime(prev => {\n//         if (prev <= 1) {\n//           setCanResend(true);\n//           return 0;\n//         }\n//         return prev - 1;\n//       });\n//     }, 1000);\n//     return () => clearInterval(timer);\n//   }, []);\n//   const formatTime = (seconds) => {\n//     const mins = Math.floor(seconds / 60);\n//     const secs = seconds % 60;\n//     return `(${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')})`;\n//   };\n//   const handleCodeChange = (index, value) => {\n//     const numericValue = value.replace(/\\D/g, '').slice(0, 1);\n//     const newCode = [...code];\n//     newCode[index] = numericValue;\n//     setCode(newCode);\n//     if (numericValue && index < 3) {\n//       inputRefs[index + 1].current.focus();\n//     }\n//     if (newCode.every(digit => digit !== '') && index === 3) {\n//       handleSubmit(newCode.join(''));\n//     }\n//   };\n//   const handleKeyDown = (index, e) => {\n//     if (e.key === 'Backspace' && !code[index] && index > 0) {\n//       inputRefs[index - 1].current.focus();\n//     }\n//   };\n//   const handlePaste = (e) => {\n//     e.preventDefault();\n//     const pastedData = e.clipboardData.getData('text');\n//     const numbers = pastedData.replace(/\\D/g, '').slice(0, 4);\n//     const newCode = [...code];\n//     numbers.split('').forEach((num, index) => {\n//       if (index < 4) {\n//         newCode[index] = num;\n//       }\n//     });\n//     setCode(newCode);\n//     const nextEmptyIndex = newCode.findIndex(digit => digit === '');\n//     if (nextEmptyIndex !== -1) {\n//       inputRefs[nextEmptyIndex].current.focus();\n//     } else {\n//       inputRefs[3].current.focus();\n//     }\n//   };\n//   const handleSubmit = async (verificationCode = code.join('')) => {\n//     if (verificationCode.length !== 4) {\n//       showError('Please enter the complete 4-digit verification code');\n//       return;\n//     }\n//     setIsSubmitting(true);\n//     try {\n//       // Verify the code\n//       const verifyResult = await phoneVerificationService.verifyCode(phoneNumber, verificationCode);\n//       if (verifyResult.success) {\n//         // Update user's phone number in profile\n//         const updateResult = await phoneVerificationService.updatePhoneNumber(phoneNumber);\n//         if (updateResult.success) {\n//         //   setShowSuccess(true);\n//           showSuccess('Phone number verified and updated successfully!');\n//           // Auto navigate back after success\n//           setTimeout(() => {\n//             // setShowSuccess(false);\n//             navigate(-1); // Go back to profile page\n//           }, 2000);\n//         }\n//       }\n//     } catch (error) {\n//       console.error('Verification error:', error);\n//       if (error.code === 400) {\n//         showError('Invalid verification code');\n//       } else if (error.code === 410) {\n//         showError('Verification code has expired');\n//       } else if (error.code === 429) {\n//         showError('Too many attempts. Please try again later.');\n//       } else if (error.code === 500) {\n//         showError('Server error. Please try again later.');\n//       } else {\n//         showError(error.message || 'Verification failed');\n//       }\n//       // Clear the code on error\n//       setCode(['', '', '', '']);\n//       inputRefs[0].current.focus();\n//     } finally {\n//       setIsSubmitting(false);\n//     }\n//   };\n//   const handleResendCode = async () => {\n//     if (!canResend) return;\n//     setResendTime(285); // Reset to 4:45\n//     setCanResend(false);\n//     setCode(['', '', '', '']);\n//     inputRefs[0].current.focus();\n//     try {\n//       const result = await phoneVerificationService.resendVerificationCode(phoneNumber);\n//       if (result.success) {\n//         // showSuccess(result.message);\n//       }\n//     } catch (error) {\n//       console.error('Resend code error:', error);\n//       showError(error.message || 'Failed to resend verification code');\n//       setCanResend(true); // Allow retry if resend fails\n//     }\n//   };\n//   return (\n//     <div className=\"content mcd-style third-party-login verify-code\">\n//       <div className=\"verification-wrap ng-star-inserted\">\n//         <div className=\"verification-txt\">\n//           <p>\n//             Please enter the 4-digit code sent to{' '}\n//             <span className=\"player ng-star-inserted\">{maskedPhoneNumber}</span>\n//           </p>\n//         </div>\n//         <div className=\"verification-content\">\n//           <form \n//             novalidate \n//             name=\"one-time-code\" \n//             className=\"verification-code ng-untouched ng-pristine ng-valid\"\n//             onSubmit={(e) => e.preventDefault()}\n//           >\n//             <fieldset>\n//               <label htmlFor=\"code-1\" className=\"label\">Number 1</label>\n//               <label htmlFor=\"code-2\" className=\"label\">Number 2</label>\n//               <label htmlFor=\"code-3\" className=\"label\">Number 3</label>\n//               <label htmlFor=\"code-4\" className=\"label\">Number 4</label>\n//               <div id=\"verification-input\" className=\"verification-input\">\n//                 {code.map((digit, index) => (\n//                   <input\n//                     key={index}\n//                     ref={inputRefs[index]}\n//                     type=\"number\"\n//                     pattern=\"[0-9]*\"\n//                     min=\"0\"\n//                     max=\"9\"\n//                     maxLength=\"1\"\n//                     value={digit}\n//                     inputtype=\"numeric\"\n//                     id={`code-${index}`}\n//                     className={`code-input ${digit ? 'filled' : ''}`}\n//                     onChange={(e) => handleCodeChange(index, e.target.value)}\n//                     onKeyDown={(e) => handleKeyDown(index, e)}\n//                     onPaste={index === 0 ? handlePaste : undefined}\n//                     onInput={(e) => {\n//                       if (e.target.value.length > 1) {\n//                         e.target.value = e.target.value.slice(0, 1);\n//                       }\n//                     }}\n//                     disabled={isSubmitting || showSuccess}\n//                     autoFocus={index === 0}\n//                   />\n//                 ))}\n//               </div>\n//             </fieldset>\n//           </form>\n//         </div>\n//         <div className=\"verification-tips\">\n//           <p>\n//             Didn't receive code?{' '}\n//             <a \n//               className={`resend-btn ${canResend ? 'active' : 'disabled'}`}\n//               onClick={handleResendCode}\n//             >\n//               Resend{' '}\n//               {!canResend && (\n//                 <span className=\"time active\">{formatTime(resendTime)}</span>\n//               )}\n//             </a>\n//           </p>\n//         </div>\n//       </div>\n//       {/* Success Popup */}\n//       {showSuccess && (\n//         <div className=\"pop-wrap pop-success ng-star-inserted\">\n//           <div className=\"register-success-wrap\">\n//             <div className=\"register-success-cont\">\n//               <div className=\"register-success-txt top-inner\">\n//                 <div className=\"success-checkmark\">\n//                   <div className=\"check-icon\">\n//                     <span className=\"icon-line line-tip\"></span>\n//                     <span className=\"icon-line line-long\"></span>\n//                     <div className=\"icon-circle\"></div>\n//                     <div className=\"icon-fix\"></div>\n//                   </div>\n//                 </div>\n//                 <h4>Success</h4>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// };\n// export default VerificationCode;\n// components/member/VerificationCode/VerificationCode.js\nimport React,{useState,useRef,useEffect}from'react';import{useNavigate,useLocation}from'react-router-dom';import{phoneVerificationService}from'../../../services/phoneVerificationService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerificationCode=_ref=>{var _location$state;let{showError,showSuccess,showWarning,showInfo}=_ref;const navigate=useNavigate();const location=useLocation();const[code,setCode]=useState(['','','','']);const[isSubmitting,setIsSubmitting]=useState(false);const[showSuccessPopup,setShowSuccessPopup]=useState(false);// Renamed to avoid conflict with prop\nconst[resendTime,setResendTime]=useState(285);// 4:45 in seconds\nconst[canResend,setCanResend]=useState(false);const inputRefs=[useRef(null),useRef(null),useRef(null),useRef(null)];// Get phone number from navigation state\nconst phoneNumber=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.phoneNumber;// Extract phone number string from phone object\nconst getPhoneNumberString=()=>{if(!phoneNumber)return'+880 13******00';if(typeof phoneNumber==='string'){return phoneNumber;}// If it's a phone object with countryCode and number properties\nif(phoneNumber.countryCode&&phoneNumber.number){return\"\".concat(phoneNumber.countryCode,\" \").concat(phoneNumber.number);}return'+880 13******00';};const phoneNumberString=getPhoneNumberString();const maskedPhoneNumber=phoneNumberString.replace(/(\\d{4})(\\d+)(\\d{2})/,'$1******$3');// Timer for resend code\nuseEffect(()=>{const timer=setInterval(()=>{setResendTime(prev=>{if(prev<=1){setCanResend(true);return 0;}return prev-1;});},1000);return()=>clearInterval(timer);},[]);const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return\"(\".concat(mins.toString().padStart(2,'0'),\":\").concat(secs.toString().padStart(2,'0'),\")\");};const handleCodeChange=(index,value)=>{const numericValue=value.replace(/\\D/g,'').slice(0,1);const newCode=[...code];newCode[index]=numericValue;setCode(newCode);if(numericValue&&index<3){inputRefs[index+1].current.focus();}if(newCode.every(digit=>digit!=='')&&index===3){handleSubmit(newCode.join(''));}};const handleKeyDown=(index,e)=>{if(e.key==='Backspace'&&!code[index]&&index>0){inputRefs[index-1].current.focus();}};const handlePaste=e=>{e.preventDefault();const pastedData=e.clipboardData.getData('text');const numbers=pastedData.replace(/\\D/g,'').slice(0,4);const newCode=[...code];numbers.split('').forEach((num,index)=>{if(index<4){newCode[index]=num;}});setCode(newCode);const nextEmptyIndex=newCode.findIndex(digit=>digit==='');if(nextEmptyIndex!==-1){inputRefs[nextEmptyIndex].current.focus();}else{inputRefs[3].current.focus();}};const handleSubmit=async function(){let verificationCode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:code.join('');if(verificationCode.length!==4){showError('Please enter the complete 4-digit verification code');return;}setIsSubmitting(true);try{// Verify the code - pass the phone number string\nconst verifyResult=await phoneVerificationService.verifyCode(phoneNumberString,verificationCode);if(verifyResult.success){// Update user's phone number in profile\nconst updateResult=await phoneVerificationService.updatePhoneNumber(phoneNumberString);if(updateResult.success){setShowSuccessPopup(true);showSuccess('Phone number verified and updated successfully!');// Auto navigate back after success\nsetTimeout(()=>{var _location$state2;setShowSuccessPopup(false);if((_location$state2=location.state)!==null&&_location$state2!==void 0&&_location$state2.background){navigate(-1);// Go back to profile page\n}else{navigate('/profile');}},2000);}}}catch(error){console.error('Verification error:',error);// Handle specific error codes\nif(error.code===400){showError('Invalid verification code');}else if(error.code===410){showError('Verification code has expired');}else if(error.code===429){showError('Too many attempts. Please try again later.');}else if(error.code===500){showError('Server error. Please try again later.');}else{showError(error.message||'Verification failed');}// Clear the code on error\nsetCode(['','','','']);inputRefs[0].current.focus();}finally{setIsSubmitting(false);}};const handleResendCode=async()=>{if(!canResend)return;setResendTime(285);// Reset to 4:45\nsetCanResend(false);setCode(['','','','']);inputRefs[0].current.focus();try{const result=await phoneVerificationService.resendVerificationCode(phoneNumberString);if(result.success){showInfo('Verification code has been resent');}}catch(error){console.error('Resend code error:',error);showError(error.message||'Failed to resend verification code');setCanResend(true);// Allow retry if resend fails\n}};const closeModal=()=>{var _location$state3;if((_location$state3=location.state)!==null&&_location$state3!==void 0&&_location$state3.background){navigate(-1);}else{navigate('/');}};return/*#__PURE__*/_jsx(\"div\",{className:\"popup-page-wrapper active\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-page show-toolbar popup-page--active popup-page--align-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup-page__backdrop\",onClick:closeModal}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-page__main popup-page-main popup-page-main--show\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"popup-page-main__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"popup-page-main__title\",children:\"Verify Phone Number\"}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-page-main__close ng-star-inserted\",onClick:closeModal,children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"popup-page-main__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content mcd-style third-party-login verify-code\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"verification-wrap ng-star-inserted\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"verification-txt\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Please enter the 4-digit code sent to\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"player ng-star-inserted\",children:maskedPhoneNumber})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-content\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,name:\"one-time-code\",className:\"verification-code ng-untouched ng-pristine ng-valid\",onSubmit:e=>e.preventDefault(),children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code-1\",className:\"label\",children:\"Number 1\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code-2\",className:\"label\",children:\"Number 2\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code-3\",className:\"label\",children:\"Number 3\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"code-4\",className:\"label\",children:\"Number 4\"}),/*#__PURE__*/_jsx(\"div\",{id:\"verification-input\",className:\"verification-input\",children:code.map((digit,index)=>/*#__PURE__*/_jsx(\"input\",{ref:inputRefs[index],type:\"number\",pattern:\"[0-9]*\",min:\"0\",max:\"9\",maxLength:\"1\",value:digit,inputtype:\"numeric\",id:\"code-\".concat(index),className:\"code-input \".concat(digit?'filled':''),onChange:e=>handleCodeChange(index,e.target.value),onKeyDown:e=>handleKeyDown(index,e),onPaste:index===0?handlePaste:undefined,onInput:e=>{if(e.target.value.length>1){e.target.value=e.target.value.slice(0,1);}},disabled:isSubmitting||showSuccessPopup,autoFocus:index===0},index))})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"verification-tips\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Didn't receive code?\",' ',/*#__PURE__*/_jsxs(\"a\",{className:\"resend-btn \".concat(canResend?'active':'disabled'),onClick:handleResendCode,style:{cursor:canResend?'pointer':'not-allowed',opacity:canResend?1:0.6},children:[\"Resend\",' ',!canResend&&/*#__PURE__*/_jsx(\"span\",{className:\"time active\",children:formatTime(resendTime)})]})]})})]}),showSuccessPopup&&/*#__PURE__*/_jsx(\"div\",{className:\"pop-wrap pop-success ng-star-inserted\",children:/*#__PURE__*/_jsx(\"div\",{className:\"register-success-wrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"register-success-cont\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"register-success-txt top-inner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-checkmark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"check-icon\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon-line line-tip\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon-line line-long\"}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-circle\"}),/*#__PURE__*/_jsx(\"div\",{className:\"icon-fix\"})]})}),/*#__PURE__*/_jsx(\"h4\",{children:\"Success\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Phone number verified successfully!\"})]})})})})]})})]})]})});};export default VerificationCode;","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useLocation","phoneVerificationService","jsx","_jsx","jsxs","_jsxs","VerificationCode","_ref","_location$state","showError","showSuccess","showWarning","showInfo","navigate","location","code","setCode","isSubmitting","setIsSubmitting","showSuccessPopup","setShowSuccessPopup","resendTime","setResendTime","canResend","setCanResend","inputRefs","phoneNumber","state","getPhoneNumberString","countryCode","number","concat","phoneNumberString","maskedPhoneNumber","replace","timer","setInterval","prev","clearInterval","formatTime","seconds","mins","Math","floor","secs","toString","padStart","handleCodeChange","index","value","numericValue","slice","newCode","current","focus","every","digit","handleSubmit","join","handleKeyDown","e","key","handlePaste","preventDefault","pastedData","clipboardData","getData","numbers","split","forEach","num","nextEmptyIndex","findIndex","verificationCode","arguments","length","undefined","verifyResult","verifyCode","success","updateResult","updatePhoneNumber","setTimeout","_location$state2","background","error","console","message","handleResendCode","result","resendVerificationCode","closeModal","_location$state3","className","children","onClick","noValidate","name","onSubmit","htmlFor","id","map","ref","type","pattern","min","max","maxLength","inputtype","onChange","target","onKeyDown","onPaste","onInput","disabled","autoFocus","style","cursor","opacity"],"sources":["F:/png71/my-app/src/components/member/AddPhoneNumber/VerificationCode.jsx"],"sourcesContent":["// // components/member/VerificationCode/VerificationCode.js\r\n// import React, { useState, useRef, useEffect } from 'react';\r\n// import { useNavigate, useLocation } from 'react-router-dom';\r\n// import { phoneVerificationService } from '../../../services/phoneVerificationService';\r\n\r\n// const VerificationCode = ({ showError, showSuccess, showWarning, showInfo }) => {\r\n//   const navigate = useNavigate();\r\n//   const location = useLocation();\r\n//   const [code, setCode] = useState(['', '', '', '']);\r\n//   const [isSubmitting, setIsSubmitting] = useState(false);\r\n// //   const [showSuccess, setShowSuccess] = useState(false);\r\n//   const [resendTime, setResendTime] = useState(285); // 4:45 in seconds\r\n//   const [canResend, setCanResend] = useState(false);\r\n  \r\n//   const inputRefs = [\r\n//     useRef(null),\r\n//     useRef(null),\r\n//     useRef(null),\r\n//     useRef(null)\r\n//   ];\r\n\r\n//   // Get phone number from navigation state\r\n//   const phoneNumber = location.state?.phoneNumber || '+880 13******00';\r\n//   const maskedPhoneNumber = phoneNumber ? phoneNumber.replace(/(\\d{4})(\\d+)(\\d{2})/, '$1******$3') : '+880 13******00';\r\n\r\n//   // Timer for resend code\r\n//   useEffect(() => {\r\n//     const timer = setInterval(() => {\r\n//       setResendTime(prev => {\r\n//         if (prev <= 1) {\r\n//           setCanResend(true);\r\n//           return 0;\r\n//         }\r\n//         return prev - 1;\r\n//       });\r\n//     }, 1000);\r\n\r\n//     return () => clearInterval(timer);\r\n//   }, []);\r\n\r\n//   const formatTime = (seconds) => {\r\n//     const mins = Math.floor(seconds / 60);\r\n//     const secs = seconds % 60;\r\n//     return `(${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')})`;\r\n//   };\r\n\r\n//   const handleCodeChange = (index, value) => {\r\n//     const numericValue = value.replace(/\\D/g, '').slice(0, 1);\r\n    \r\n//     const newCode = [...code];\r\n//     newCode[index] = numericValue;\r\n//     setCode(newCode);\r\n\r\n//     if (numericValue && index < 3) {\r\n//       inputRefs[index + 1].current.focus();\r\n//     }\r\n\r\n//     if (newCode.every(digit => digit !== '') && index === 3) {\r\n//       handleSubmit(newCode.join(''));\r\n//     }\r\n//   };\r\n\r\n//   const handleKeyDown = (index, e) => {\r\n//     if (e.key === 'Backspace' && !code[index] && index > 0) {\r\n//       inputRefs[index - 1].current.focus();\r\n//     }\r\n//   };\r\n\r\n//   const handlePaste = (e) => {\r\n//     e.preventDefault();\r\n//     const pastedData = e.clipboardData.getData('text');\r\n//     const numbers = pastedData.replace(/\\D/g, '').slice(0, 4);\r\n    \r\n//     const newCode = [...code];\r\n//     numbers.split('').forEach((num, index) => {\r\n//       if (index < 4) {\r\n//         newCode[index] = num;\r\n//       }\r\n//     });\r\n    \r\n//     setCode(newCode);\r\n    \r\n//     const nextEmptyIndex = newCode.findIndex(digit => digit === '');\r\n//     if (nextEmptyIndex !== -1) {\r\n//       inputRefs[nextEmptyIndex].current.focus();\r\n//     } else {\r\n//       inputRefs[3].current.focus();\r\n//     }\r\n//   };\r\n\r\n//   const handleSubmit = async (verificationCode = code.join('')) => {\r\n//     if (verificationCode.length !== 4) {\r\n//       showError('Please enter the complete 4-digit verification code');\r\n//       return;\r\n//     }\r\n\r\n//     setIsSubmitting(true);\r\n    \r\n//     try {\r\n//       // Verify the code\r\n//       const verifyResult = await phoneVerificationService.verifyCode(phoneNumber, verificationCode);\r\n      \r\n//       if (verifyResult.success) {\r\n//         // Update user's phone number in profile\r\n//         const updateResult = await phoneVerificationService.updatePhoneNumber(phoneNumber);\r\n        \r\n//         if (updateResult.success) {\r\n//         //   setShowSuccess(true);\r\n//           showSuccess('Phone number verified and updated successfully!');\r\n          \r\n//           // Auto navigate back after success\r\n//           setTimeout(() => {\r\n//             // setShowSuccess(false);\r\n//             navigate(-1); // Go back to profile page\r\n//           }, 2000);\r\n//         }\r\n//       }\r\n//     } catch (error) {\r\n//       console.error('Verification error:', error);\r\n      \r\n//       if (error.code === 400) {\r\n//         showError('Invalid verification code');\r\n//       } else if (error.code === 410) {\r\n//         showError('Verification code has expired');\r\n//       } else if (error.code === 429) {\r\n//         showError('Too many attempts. Please try again later.');\r\n//       } else if (error.code === 500) {\r\n//         showError('Server error. Please try again later.');\r\n//       } else {\r\n//         showError(error.message || 'Verification failed');\r\n//       }\r\n      \r\n//       // Clear the code on error\r\n//       setCode(['', '', '', '']);\r\n//       inputRefs[0].current.focus();\r\n//     } finally {\r\n//       setIsSubmitting(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleResendCode = async () => {\r\n//     if (!canResend) return;\r\n\r\n//     setResendTime(285); // Reset to 4:45\r\n//     setCanResend(false);\r\n//     setCode(['', '', '', '']);\r\n//     inputRefs[0].current.focus();\r\n    \r\n//     try {\r\n//       const result = await phoneVerificationService.resendVerificationCode(phoneNumber);\r\n      \r\n//       if (result.success) {\r\n//         // showSuccess(result.message);\r\n//       }\r\n//     } catch (error) {\r\n//       console.error('Resend code error:', error);\r\n//       showError(error.message || 'Failed to resend verification code');\r\n//       setCanResend(true); // Allow retry if resend fails\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"content mcd-style third-party-login verify-code\">\r\n//       <div className=\"verification-wrap ng-star-inserted\">\r\n//         <div className=\"verification-txt\">\r\n//           <p>\r\n//             Please enter the 4-digit code sent to{' '}\r\n//             <span className=\"player ng-star-inserted\">{maskedPhoneNumber}</span>\r\n//           </p>\r\n//         </div>\r\n\r\n//         <div className=\"verification-content\">\r\n//           <form \r\n//             novalidate \r\n//             name=\"one-time-code\" \r\n//             className=\"verification-code ng-untouched ng-pristine ng-valid\"\r\n//             onSubmit={(e) => e.preventDefault()}\r\n//           >\r\n//             <fieldset>\r\n//               <label htmlFor=\"code-1\" className=\"label\">Number 1</label>\r\n//               <label htmlFor=\"code-2\" className=\"label\">Number 2</label>\r\n//               <label htmlFor=\"code-3\" className=\"label\">Number 3</label>\r\n//               <label htmlFor=\"code-4\" className=\"label\">Number 4</label>\r\n              \r\n//               <div id=\"verification-input\" className=\"verification-input\">\r\n//                 {code.map((digit, index) => (\r\n//                   <input\r\n//                     key={index}\r\n//                     ref={inputRefs[index]}\r\n//                     type=\"number\"\r\n//                     pattern=\"[0-9]*\"\r\n//                     min=\"0\"\r\n//                     max=\"9\"\r\n//                     maxLength=\"1\"\r\n//                     value={digit}\r\n//                     inputtype=\"numeric\"\r\n//                     id={`code-${index}`}\r\n//                     className={`code-input ${digit ? 'filled' : ''}`}\r\n//                     onChange={(e) => handleCodeChange(index, e.target.value)}\r\n//                     onKeyDown={(e) => handleKeyDown(index, e)}\r\n//                     onPaste={index === 0 ? handlePaste : undefined}\r\n//                     onInput={(e) => {\r\n//                       if (e.target.value.length > 1) {\r\n//                         e.target.value = e.target.value.slice(0, 1);\r\n//                       }\r\n//                     }}\r\n//                     disabled={isSubmitting || showSuccess}\r\n//                     autoFocus={index === 0}\r\n//                   />\r\n//                 ))}\r\n//               </div>\r\n//             </fieldset>\r\n//           </form>\r\n//         </div>\r\n\r\n//         <div className=\"verification-tips\">\r\n//           <p>\r\n//             Didn't receive code?{' '}\r\n//             <a \r\n//               className={`resend-btn ${canResend ? 'active' : 'disabled'}`}\r\n//               onClick={handleResendCode}\r\n//             >\r\n//               Resend{' '}\r\n//               {!canResend && (\r\n//                 <span className=\"time active\">{formatTime(resendTime)}</span>\r\n//               )}\r\n//             </a>\r\n//           </p>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Success Popup */}\r\n//       {showSuccess && (\r\n//         <div className=\"pop-wrap pop-success ng-star-inserted\">\r\n//           <div className=\"register-success-wrap\">\r\n//             <div className=\"register-success-cont\">\r\n//               <div className=\"register-success-txt top-inner\">\r\n//                 <div className=\"success-checkmark\">\r\n//                   <div className=\"check-icon\">\r\n//                     <span className=\"icon-line line-tip\"></span>\r\n//                     <span className=\"icon-line line-long\"></span>\r\n//                     <div className=\"icon-circle\"></div>\r\n//                     <div className=\"icon-fix\"></div>\r\n//                   </div>\r\n//                 </div>\r\n//                 <h4>Success</h4>\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default VerificationCode;\r\n\r\n\r\n// components/member/VerificationCode/VerificationCode.js\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { phoneVerificationService } from '../../../services/phoneVerificationService';\r\n\r\nconst VerificationCode = ({ showError, showSuccess, showWarning, showInfo }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [code, setCode] = useState(['', '', '', '']);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [showSuccessPopup, setShowSuccessPopup] = useState(false); // Renamed to avoid conflict with prop\r\n  const [resendTime, setResendTime] = useState(285); // 4:45 in seconds\r\n  const [canResend, setCanResend] = useState(false);\r\n  \r\n  const inputRefs = [\r\n    useRef(null),\r\n    useRef(null),\r\n    useRef(null),\r\n    useRef(null)\r\n  ];\r\n\r\n  // Get phone number from navigation state\r\n  const phoneNumber = location.state?.phoneNumber;\r\n  \r\n  // Extract phone number string from phone object\r\n  const getPhoneNumberString = () => {\r\n    if (!phoneNumber) return '+880 13******00';\r\n    \r\n    if (typeof phoneNumber === 'string') {\r\n      return phoneNumber;\r\n    }\r\n    \r\n    // If it's a phone object with countryCode and number properties\r\n    if (phoneNumber.countryCode && phoneNumber.number) {\r\n      return `${phoneNumber.countryCode} ${phoneNumber.number}`;\r\n    }\r\n    \r\n    return '+880 13******00';\r\n  };\r\n\r\n  const phoneNumberString = getPhoneNumberString();\r\n  const maskedPhoneNumber = phoneNumberString.replace(/(\\d{4})(\\d+)(\\d{2})/, '$1******$3');\r\n\r\n  // Timer for resend code\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setResendTime(prev => {\r\n        if (prev <= 1) {\r\n          setCanResend(true);\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `(${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')})`;\r\n  };\r\n\r\n  const handleCodeChange = (index, value) => {\r\n    const numericValue = value.replace(/\\D/g, '').slice(0, 1);\r\n    \r\n    const newCode = [...code];\r\n    newCode[index] = numericValue;\r\n    setCode(newCode);\r\n\r\n    if (numericValue && index < 3) {\r\n      inputRefs[index + 1].current.focus();\r\n    }\r\n\r\n    if (newCode.every(digit => digit !== '') && index === 3) {\r\n      handleSubmit(newCode.join(''));\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (index, e) => {\r\n    if (e.key === 'Backspace' && !code[index] && index > 0) {\r\n      inputRefs[index - 1].current.focus();\r\n    }\r\n  };\r\n\r\n  const handlePaste = (e) => {\r\n    e.preventDefault();\r\n    const pastedData = e.clipboardData.getData('text');\r\n    const numbers = pastedData.replace(/\\D/g, '').slice(0, 4);\r\n    \r\n    const newCode = [...code];\r\n    numbers.split('').forEach((num, index) => {\r\n      if (index < 4) {\r\n        newCode[index] = num;\r\n      }\r\n    });\r\n    \r\n    setCode(newCode);\r\n    \r\n    const nextEmptyIndex = newCode.findIndex(digit => digit === '');\r\n    if (nextEmptyIndex !== -1) {\r\n      inputRefs[nextEmptyIndex].current.focus();\r\n    } else {\r\n      inputRefs[3].current.focus();\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (verificationCode = code.join('')) => {\r\n    if (verificationCode.length !== 4) {\r\n      showError('Please enter the complete 4-digit verification code');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      // Verify the code - pass the phone number string\r\n      const verifyResult = await phoneVerificationService.verifyCode(phoneNumberString, verificationCode);\r\n      \r\n      if (verifyResult.success) {\r\n        // Update user's phone number in profile\r\n        const updateResult = await phoneVerificationService.updatePhoneNumber(phoneNumberString);\r\n        \r\n        if (updateResult.success) {\r\n          setShowSuccessPopup(true);\r\n          showSuccess('Phone number verified and updated successfully!');\r\n          \r\n          // Auto navigate back after success\r\n          setTimeout(() => {\r\n            setShowSuccessPopup(false);\r\n            if (location.state?.background) {\r\n              navigate(-1); // Go back to profile page\r\n            } else {\r\n              navigate('/profile');\r\n            }\r\n          }, 2000);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Verification error:', error);\r\n      \r\n      // Handle specific error codes\r\n      if (error.code === 400) {\r\n        showError('Invalid verification code');\r\n      } else if (error.code === 410) {\r\n        showError('Verification code has expired');\r\n      } else if (error.code === 429) {\r\n        showError('Too many attempts. Please try again later.');\r\n      } else if (error.code === 500) {\r\n        showError('Server error. Please try again later.');\r\n      } else {\r\n        showError(error.message || 'Verification failed');\r\n      }\r\n      \r\n      // Clear the code on error\r\n      setCode(['', '', '', '']);\r\n      inputRefs[0].current.focus();\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleResendCode = async () => {\r\n    if (!canResend) return;\r\n\r\n    setResendTime(285); // Reset to 4:45\r\n    setCanResend(false);\r\n    setCode(['', '', '', '']);\r\n    inputRefs[0].current.focus();\r\n    \r\n    try {\r\n      const result = await phoneVerificationService.resendVerificationCode(phoneNumberString);\r\n      \r\n      if (result.success) {\r\n        showInfo('Verification code has been resent');\r\n      }\r\n    } catch (error) {\r\n      console.error('Resend code error:', error);\r\n      showError(error.message || 'Failed to resend verification code');\r\n      setCanResend(true); // Allow retry if resend fails\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    if (location.state?.background) {\r\n      navigate(-1);\r\n    } else {\r\n      navigate('/');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"popup-page-wrapper active\">\r\n      <div className=\"popup-page show-toolbar popup-page--active popup-page--align-top\">\r\n        <div className=\"popup-page__backdrop\" onClick={closeModal}></div>\r\n        <div className=\"popup-page__main popup-page-main popup-page-main--show\">\r\n          {/* Header */}\r\n          <div className=\"popup-page-main__header\">\r\n            <div className=\"popup-page-main__title\">Verify Phone Number</div>\r\n            <div\r\n              className=\"popup-page-main__close ng-star-inserted\"\r\n              onClick={closeModal}\r\n            >\r\n              âœ•\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"popup-page-main__container\">\r\n            <div className=\"content mcd-style third-party-login verify-code\">\r\n              <div className=\"verification-wrap ng-star-inserted\">\r\n                <div className=\"verification-txt\">\r\n                  <p>\r\n                    Please enter the 4-digit code sent to{' '}\r\n                    <span className=\"player ng-star-inserted\">{maskedPhoneNumber}</span>\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"verification-content\">\r\n                  <form \r\n                    noValidate \r\n                    name=\"one-time-code\" \r\n                    className=\"verification-code ng-untouched ng-pristine ng-valid\"\r\n                    onSubmit={(e) => e.preventDefault()}\r\n                  >\r\n                    <fieldset>\r\n                      <label htmlFor=\"code-1\" className=\"label\">Number 1</label>\r\n                      <label htmlFor=\"code-2\" className=\"label\">Number 2</label>\r\n                      <label htmlFor=\"code-3\" className=\"label\">Number 3</label>\r\n                      <label htmlFor=\"code-4\" className=\"label\">Number 4</label>\r\n                      \r\n                      <div id=\"verification-input\" className=\"verification-input\">\r\n                        {code.map((digit, index) => (\r\n                          <input\r\n                            key={index}\r\n                            ref={inputRefs[index]}\r\n                            type=\"number\"\r\n                            pattern=\"[0-9]*\"\r\n                            min=\"0\"\r\n                            max=\"9\"\r\n                            maxLength=\"1\"\r\n                            value={digit}\r\n                            inputtype=\"numeric\"\r\n                            id={`code-${index}`}\r\n                            className={`code-input ${digit ? 'filled' : ''}`}\r\n                            onChange={(e) => handleCodeChange(index, e.target.value)}\r\n                            onKeyDown={(e) => handleKeyDown(index, e)}\r\n                            onPaste={index === 0 ? handlePaste : undefined}\r\n                            onInput={(e) => {\r\n                              if (e.target.value.length > 1) {\r\n                                e.target.value = e.target.value.slice(0, 1);\r\n                              }\r\n                            }}\r\n                            disabled={isSubmitting || showSuccessPopup}\r\n                            autoFocus={index === 0}\r\n                          />\r\n                        ))}\r\n                      </div>\r\n                    </fieldset>\r\n                  </form>\r\n                </div>\r\n\r\n                <div className=\"verification-tips\">\r\n                  <p>\r\n                    Didn't receive code?{' '}\r\n                    <a \r\n                      className={`resend-btn ${canResend ? 'active' : 'disabled'}`}\r\n                      onClick={handleResendCode}\r\n                      style={{ \r\n                        cursor: canResend ? 'pointer' : 'not-allowed',\r\n                        opacity: canResend ? 1 : 0.6\r\n                      }}\r\n                    >\r\n                      Resend{' '}\r\n                      {!canResend && (\r\n                        <span className=\"time active\">{formatTime(resendTime)}</span>\r\n                      )}\r\n                    </a>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Success Popup */}\r\n              {showSuccessPopup && (\r\n                <div className=\"pop-wrap pop-success ng-star-inserted\">\r\n                  <div className=\"register-success-wrap\">\r\n                    <div className=\"register-success-cont\">\r\n                      <div className=\"register-success-txt top-inner\">\r\n                        <div className=\"success-checkmark\">\r\n                          <div className=\"check-icon\">\r\n                            <span className=\"icon-line line-tip\"></span>\r\n                            <span className=\"icon-line line-long\"></span>\r\n                            <div className=\"icon-circle\"></div>\r\n                            <div className=\"icon-fix\"></div>\r\n                          </div>\r\n                        </div>\r\n                        <h4>Success</h4>\r\n                        <p>Phone number verified successfully!</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerificationCode;"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,wBAAwB,KAAQ,4CAA4C,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtF,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAAuD,KAAAC,eAAA,IAAtD,CAAEC,SAAS,CAAEC,WAAW,CAAEC,WAAW,CAAEC,QAAS,CAAC,CAAAL,IAAA,CACzE,KAAM,CAAAM,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAe,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACe,IAAI,CAAEC,OAAO,CAAC,CAAGpB,QAAQ,CAAC,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CAClD,KAAM,CAACqB,YAAY,CAAEC,eAAe,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACuB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CAAE;AACjE,KAAM,CAACyB,UAAU,CAAEC,aAAa,CAAC,CAAG1B,QAAQ,CAAC,GAAG,CAAC,CAAE;AACnD,KAAM,CAAC2B,SAAS,CAAEC,YAAY,CAAC,CAAG5B,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAA6B,SAAS,CAAG,CAChB5B,MAAM,CAAC,IAAI,CAAC,CACZA,MAAM,CAAC,IAAI,CAAC,CACZA,MAAM,CAAC,IAAI,CAAC,CACZA,MAAM,CAAC,IAAI,CAAC,CACb,CAED;AACA,KAAM,CAAA6B,WAAW,EAAAlB,eAAA,CAAGM,QAAQ,CAACa,KAAK,UAAAnB,eAAA,iBAAdA,eAAA,CAAgBkB,WAAW,CAE/C;AACA,KAAM,CAAAE,oBAAoB,CAAGA,CAAA,GAAM,CACjC,GAAI,CAACF,WAAW,CAAE,MAAO,iBAAiB,CAE1C,GAAI,MAAO,CAAAA,WAAW,GAAK,QAAQ,CAAE,CACnC,MAAO,CAAAA,WAAW,CACpB,CAEA;AACA,GAAIA,WAAW,CAACG,WAAW,EAAIH,WAAW,CAACI,MAAM,CAAE,CACjD,SAAAC,MAAA,CAAUL,WAAW,CAACG,WAAW,MAAAE,MAAA,CAAIL,WAAW,CAACI,MAAM,EACzD,CAEA,MAAO,iBAAiB,CAC1B,CAAC,CAED,KAAM,CAAAE,iBAAiB,CAAGJ,oBAAoB,CAAC,CAAC,CAChD,KAAM,CAAAK,iBAAiB,CAAGD,iBAAiB,CAACE,OAAO,CAAC,qBAAqB,CAAE,YAAY,CAAC,CAExF;AACApC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqC,KAAK,CAAGC,WAAW,CAAC,IAAM,CAC9Bd,aAAa,CAACe,IAAI,EAAI,CACpB,GAAIA,IAAI,EAAI,CAAC,CAAE,CACbb,YAAY,CAAC,IAAI,CAAC,CAClB,MAAO,EAAC,CACV,CACA,MAAO,CAAAa,IAAI,CAAG,CAAC,CACjB,CAAC,CAAC,CACJ,CAAC,CAAE,IAAI,CAAC,CAER,MAAO,IAAMC,aAAa,CAACH,KAAK,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,UAAU,CAAIC,OAAO,EAAK,CAC9B,KAAM,CAAAC,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAAG,EAAE,CAAC,CACrC,KAAM,CAAAI,IAAI,CAAGJ,OAAO,CAAG,EAAE,CACzB,UAAAT,MAAA,CAAWU,IAAI,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,MAAAf,MAAA,CAAIa,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,MACjF,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CACzC,KAAM,CAAAC,YAAY,CAAGD,KAAK,CAACf,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAACiB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAEzD,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAGrC,IAAI,CAAC,CACzBqC,OAAO,CAACJ,KAAK,CAAC,CAAGE,YAAY,CAC7BlC,OAAO,CAACoC,OAAO,CAAC,CAEhB,GAAIF,YAAY,EAAIF,KAAK,CAAG,CAAC,CAAE,CAC7BvB,SAAS,CAACuB,KAAK,CAAG,CAAC,CAAC,CAACK,OAAO,CAACC,KAAK,CAAC,CAAC,CACtC,CAEA,GAAIF,OAAO,CAACG,KAAK,CAACC,KAAK,EAAIA,KAAK,GAAK,EAAE,CAAC,EAAIR,KAAK,GAAK,CAAC,CAAE,CACvDS,YAAY,CAACL,OAAO,CAACM,IAAI,CAAC,EAAE,CAAC,CAAC,CAChC,CACF,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGA,CAACX,KAAK,CAAEY,CAAC,GAAK,CAClC,GAAIA,CAAC,CAACC,GAAG,GAAK,WAAW,EAAI,CAAC9C,IAAI,CAACiC,KAAK,CAAC,EAAIA,KAAK,CAAG,CAAC,CAAE,CACtDvB,SAAS,CAACuB,KAAK,CAAG,CAAC,CAAC,CAACK,OAAO,CAACC,KAAK,CAAC,CAAC,CACtC,CACF,CAAC,CAED,KAAM,CAAAQ,WAAW,CAAIF,CAAC,EAAK,CACzBA,CAAC,CAACG,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,UAAU,CAAGJ,CAAC,CAACK,aAAa,CAACC,OAAO,CAAC,MAAM,CAAC,CAClD,KAAM,CAAAC,OAAO,CAAGH,UAAU,CAAC9B,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAACiB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAEzD,KAAM,CAAAC,OAAO,CAAG,CAAC,GAAGrC,IAAI,CAAC,CACzBoD,OAAO,CAACC,KAAK,CAAC,EAAE,CAAC,CAACC,OAAO,CAAC,CAACC,GAAG,CAAEtB,KAAK,GAAK,CACxC,GAAIA,KAAK,CAAG,CAAC,CAAE,CACbI,OAAO,CAACJ,KAAK,CAAC,CAAGsB,GAAG,CACtB,CACF,CAAC,CAAC,CAEFtD,OAAO,CAACoC,OAAO,CAAC,CAEhB,KAAM,CAAAmB,cAAc,CAAGnB,OAAO,CAACoB,SAAS,CAAChB,KAAK,EAAIA,KAAK,GAAK,EAAE,CAAC,CAC/D,GAAIe,cAAc,GAAK,CAAC,CAAC,CAAE,CACzB9C,SAAS,CAAC8C,cAAc,CAAC,CAAClB,OAAO,CAACC,KAAK,CAAC,CAAC,CAC3C,CAAC,IAAM,CACL7B,SAAS,CAAC,CAAC,CAAC,CAAC4B,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CACF,CAAC,CAED,KAAM,CAAAG,YAAY,CAAG,cAAAA,CAAA,CAA4C,IAArC,CAAAgB,gBAAgB,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG3D,IAAI,CAAC2C,IAAI,CAAC,EAAE,CAAC,CAC1D,GAAIe,gBAAgB,CAACE,MAAM,GAAK,CAAC,CAAE,CACjClE,SAAS,CAAC,qDAAqD,CAAC,CAChE,OACF,CAEAS,eAAe,CAAC,IAAI,CAAC,CAErB,GAAI,CACF;AACA,KAAM,CAAA2D,YAAY,CAAG,KAAM,CAAA5E,wBAAwB,CAAC6E,UAAU,CAAC9C,iBAAiB,CAAEyC,gBAAgB,CAAC,CAEnG,GAAII,YAAY,CAACE,OAAO,CAAE,CACxB;AACA,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAA/E,wBAAwB,CAACgF,iBAAiB,CAACjD,iBAAiB,CAAC,CAExF,GAAIgD,YAAY,CAACD,OAAO,CAAE,CACxB3D,mBAAmB,CAAC,IAAI,CAAC,CACzBV,WAAW,CAAC,iDAAiD,CAAC,CAE9D;AACAwE,UAAU,CAAC,IAAM,KAAAC,gBAAA,CACf/D,mBAAmB,CAAC,KAAK,CAAC,CAC1B,IAAA+D,gBAAA,CAAIrE,QAAQ,CAACa,KAAK,UAAAwD,gBAAA,WAAdA,gBAAA,CAAgBC,UAAU,CAAE,CAC9BvE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AAChB,CAAC,IAAM,CACLA,QAAQ,CAAC,UAAU,CAAC,CACtB,CACF,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CACF,CAAE,MAAOwE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAE3C;AACA,GAAIA,KAAK,CAACtE,IAAI,GAAK,GAAG,CAAE,CACtBN,SAAS,CAAC,2BAA2B,CAAC,CACxC,CAAC,IAAM,IAAI4E,KAAK,CAACtE,IAAI,GAAK,GAAG,CAAE,CAC7BN,SAAS,CAAC,+BAA+B,CAAC,CAC5C,CAAC,IAAM,IAAI4E,KAAK,CAACtE,IAAI,GAAK,GAAG,CAAE,CAC7BN,SAAS,CAAC,4CAA4C,CAAC,CACzD,CAAC,IAAM,IAAI4E,KAAK,CAACtE,IAAI,GAAK,GAAG,CAAE,CAC7BN,SAAS,CAAC,uCAAuC,CAAC,CACpD,CAAC,IAAM,CACLA,SAAS,CAAC4E,KAAK,CAACE,OAAO,EAAI,qBAAqB,CAAC,CACnD,CAEA;AACAvE,OAAO,CAAC,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CACzBS,SAAS,CAAC,CAAC,CAAC,CAAC4B,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CAAC,OAAS,CACRpC,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAAsE,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAI,CAACjE,SAAS,CAAE,OAEhBD,aAAa,CAAC,GAAG,CAAC,CAAE;AACpBE,YAAY,CAAC,KAAK,CAAC,CACnBR,OAAO,CAAC,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CACzBS,SAAS,CAAC,CAAC,CAAC,CAAC4B,OAAO,CAACC,KAAK,CAAC,CAAC,CAE5B,GAAI,CACF,KAAM,CAAAmC,MAAM,CAAG,KAAM,CAAAxF,wBAAwB,CAACyF,sBAAsB,CAAC1D,iBAAiB,CAAC,CAEvF,GAAIyD,MAAM,CAACV,OAAO,CAAE,CAClBnE,QAAQ,CAAC,mCAAmC,CAAC,CAC/C,CACF,CAAE,MAAOyE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1C5E,SAAS,CAAC4E,KAAK,CAACE,OAAO,EAAI,oCAAoC,CAAC,CAChE/D,YAAY,CAAC,IAAI,CAAC,CAAE;AACtB,CACF,CAAC,CAED,KAAM,CAAAmE,UAAU,CAAGA,CAAA,GAAM,KAAAC,gBAAA,CACvB,IAAAA,gBAAA,CAAI9E,QAAQ,CAACa,KAAK,UAAAiE,gBAAA,WAAdA,gBAAA,CAAgBR,UAAU,CAAE,CAC9BvE,QAAQ,CAAC,CAAC,CAAC,CAAC,CACd,CAAC,IAAM,CACLA,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAED,mBACEV,IAAA,QAAK0F,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACxCzF,KAAA,QAAKwF,SAAS,CAAC,kEAAkE,CAAAC,QAAA,eAC/E3F,IAAA,QAAK0F,SAAS,CAAC,sBAAsB,CAACE,OAAO,CAAEJ,UAAW,CAAM,CAAC,cACjEtF,KAAA,QAAKwF,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eAErEzF,KAAA,QAAKwF,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC3F,IAAA,QAAK0F,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,qBAAmB,CAAK,CAAC,cACjE3F,IAAA,QACE0F,SAAS,CAAC,yCAAyC,CACnDE,OAAO,CAAEJ,UAAW,CAAAG,QAAA,CACrB,QAED,CAAK,CAAC,EACH,CAAC,cAEN3F,IAAA,QAAK0F,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzCzF,KAAA,QAAKwF,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9DzF,KAAA,QAAKwF,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjD3F,IAAA,QAAK0F,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BzF,KAAA,MAAAyF,QAAA,EAAG,uCACoC,CAAC,GAAG,cACzC3F,IAAA,SAAM0F,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAE7D,iBAAiB,CAAO,CAAC,EACnE,CAAC,CACD,CAAC,cAEN9B,IAAA,QAAK0F,SAAS,CAAC,sBAAsB,CAAAC,QAAA,cACnC3F,IAAA,SACE6F,UAAU,MACVC,IAAI,CAAC,eAAe,CACpBJ,SAAS,CAAC,qDAAqD,CAC/DK,QAAQ,CAAGtC,CAAC,EAAKA,CAAC,CAACG,cAAc,CAAC,CAAE,CAAA+B,QAAA,cAEpCzF,KAAA,aAAAyF,QAAA,eACE3F,IAAA,UAAOgG,OAAO,CAAC,QAAQ,CAACN,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1D3F,IAAA,UAAOgG,OAAO,CAAC,QAAQ,CAACN,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1D3F,IAAA,UAAOgG,OAAO,CAAC,QAAQ,CAACN,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAC1D3F,IAAA,UAAOgG,OAAO,CAAC,QAAQ,CAACN,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,UAAQ,CAAO,CAAC,cAE1D3F,IAAA,QAAKiG,EAAE,CAAC,oBAAoB,CAACP,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CACxD/E,IAAI,CAACsF,GAAG,CAAC,CAAC7C,KAAK,CAAER,KAAK,gBACrB7C,IAAA,UAEEmG,GAAG,CAAE7E,SAAS,CAACuB,KAAK,CAAE,CACtBuD,IAAI,CAAC,QAAQ,CACbC,OAAO,CAAC,QAAQ,CAChBC,GAAG,CAAC,GAAG,CACPC,GAAG,CAAC,GAAG,CACPC,SAAS,CAAC,GAAG,CACb1D,KAAK,CAAEO,KAAM,CACboD,SAAS,CAAC,SAAS,CACnBR,EAAE,SAAArE,MAAA,CAAUiB,KAAK,CAAG,CACpB6C,SAAS,eAAA9D,MAAA,CAAgByB,KAAK,CAAG,QAAQ,CAAG,EAAE,CAAG,CACjDqD,QAAQ,CAAGjD,CAAC,EAAKb,gBAAgB,CAACC,KAAK,CAAEY,CAAC,CAACkD,MAAM,CAAC7D,KAAK,CAAE,CACzD8D,SAAS,CAAGnD,CAAC,EAAKD,aAAa,CAACX,KAAK,CAAEY,CAAC,CAAE,CAC1CoD,OAAO,CAAEhE,KAAK,GAAK,CAAC,CAAGc,WAAW,CAAGc,SAAU,CAC/CqC,OAAO,CAAGrD,CAAC,EAAK,CACd,GAAIA,CAAC,CAACkD,MAAM,CAAC7D,KAAK,CAAC0B,MAAM,CAAG,CAAC,CAAE,CAC7Bf,CAAC,CAACkD,MAAM,CAAC7D,KAAK,CAAGW,CAAC,CAACkD,MAAM,CAAC7D,KAAK,CAACE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAC7C,CACF,CAAE,CACF+D,QAAQ,CAAEjG,YAAY,EAAIE,gBAAiB,CAC3CgG,SAAS,CAAEnE,KAAK,GAAK,CAAE,EApBlBA,KAqBN,CACF,CAAC,CACC,CAAC,EACE,CAAC,CACP,CAAC,CACJ,CAAC,cAEN7C,IAAA,QAAK0F,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCzF,KAAA,MAAAyF,QAAA,EAAG,sBACmB,CAAC,GAAG,cACxBzF,KAAA,MACEwF,SAAS,eAAA9D,MAAA,CAAgBR,SAAS,CAAG,QAAQ,CAAG,UAAU,CAAG,CAC7DwE,OAAO,CAAEP,gBAAiB,CAC1B4B,KAAK,CAAE,CACLC,MAAM,CAAE9F,SAAS,CAAG,SAAS,CAAG,aAAa,CAC7C+F,OAAO,CAAE/F,SAAS,CAAG,CAAC,CAAG,GAC3B,CAAE,CAAAuE,QAAA,EACH,QACO,CAAC,GAAG,CACT,CAACvE,SAAS,eACTpB,IAAA,SAAM0F,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEvD,UAAU,CAAClB,UAAU,CAAC,CAAO,CAC7D,EACA,CAAC,EACH,CAAC,CACD,CAAC,EACH,CAAC,CAGLF,gBAAgB,eACfhB,IAAA,QAAK0F,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpD3F,IAAA,QAAK0F,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpC3F,IAAA,QAAK0F,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCzF,KAAA,QAAKwF,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC7C3F,IAAA,QAAK0F,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCzF,KAAA,QAAKwF,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB3F,IAAA,SAAM0F,SAAS,CAAC,oBAAoB,CAAO,CAAC,cAC5C1F,IAAA,SAAM0F,SAAS,CAAC,qBAAqB,CAAO,CAAC,cAC7C1F,IAAA,QAAK0F,SAAS,CAAC,aAAa,CAAM,CAAC,cACnC1F,IAAA,QAAK0F,SAAS,CAAC,UAAU,CAAM,CAAC,EAC7B,CAAC,CACH,CAAC,cACN1F,IAAA,OAAA2F,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB3F,IAAA,MAAA2F,QAAA,CAAG,qCAAmC,CAAG,CAAC,EACvC,CAAC,CACH,CAAC,CACH,CAAC,CACH,CACN,EACE,CAAC,CACH,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxF,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}