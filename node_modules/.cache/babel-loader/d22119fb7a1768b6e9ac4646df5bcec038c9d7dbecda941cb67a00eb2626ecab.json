{"ast":null,"code":"// hooks/useGamePlay.js\nimport{useState}from'react';import{useAuth}from'../contexts/AuthContext';import phoneVerificationService from'../services/phoneVerificationService';import{useApp}from'../contexts/AppContext';export const useGamePlay=()=>{const[isPlaying,setIsPlaying]=useState(false);const[playGameData,setPlayGameData]=useState(null);const[showPopup,setShowPopup]=useState(false);const{userId,setIsLoginNotify}=useAuth();const{handleRefresh}=useApp();// const [userBalance, setUserBalance] = useState(0);\n// const [refreshing, setRefreshing] = useState(false);\n//   const handleRefresh = async () => {\n//     if (refreshing) return;\n//     setRefreshing(true);\n//     try {\n//       const response = await phoneVerificationService.user_balance_update();\n//       setUserBalance(response.balance);\n//       console.log(\"Balance Data updated:\", response.balance);\n//     } catch (error) {\n//       console.error(\"Error fetching balance:\", error);\n//     } finally {\n//       setTimeout(() => setRefreshing(false), 1000);\n//     }\n//   };\nconst handlePlay=async game=>{handleRefresh(userId);if(isPlaying)return;setIsPlaying(true);try{if(userId){const response=await fetch(\"http://localhost:5000/api/v1/launch_gamePlayer\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"},body:JSON.stringify({userId,game_id:\"0\",g_type:game.g_type,p_code:game.providercode})});const data=await response.json();if(data.errMsg===\"Success\"&&userId){setPlayGameData(data);setShowPopup(true);}}else{setIsLoginNotify(\"আপনাকে লগইন করতে হবে খেলার জন্য যদি এখনো আপনার একাউন্ট না থাকে আমাদের সাথে। শুধু সাইন আপ করুন আমাদের সাথে। এটা একেবারেই ফ্রী!\");}}catch(error){console.error(\"Error launching game:\",error);setIsLoginNotify(\"আপনাকে লগইন করতে হবে খেলার জন্য যদি এখনো আপনার একাউন্ট না থাকে আমাদের সাথে। শুধু সাইন আপ করুন আমাদের সাথে। এটা একেবারেই ফ্রী!\");}finally{setIsPlaying(false);}};const handleClosePopup=()=>{handleRefresh();setShowPopup(false);setPlayGameData(null);isPlaying(false);};return{isPlaying,playGameData,showPopup,handlePlay,handleClosePopup,setShowPopup,setPlayGameData};};","map":{"version":3,"names":["useState","useAuth","phoneVerificationService","useApp","useGamePlay","isPlaying","setIsPlaying","playGameData","setPlayGameData","showPopup","setShowPopup","userId","setIsLoginNotify","handleRefresh","handlePlay","game","response","fetch","method","headers","Accept","body","JSON","stringify","game_id","g_type","p_code","providercode","data","json","errMsg","error","console","handleClosePopup"],"sources":["F:/png71/my-app/src/hooks/useGamePlay.js"],"sourcesContent":["// hooks/useGamePlay.js\r\nimport { useState } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport phoneVerificationService from '../services/phoneVerificationService';\r\nimport { useApp } from '../contexts/AppContext';\r\nexport const useGamePlay = () => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [playGameData, setPlayGameData] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const { userId, setIsLoginNotify } = useAuth();\r\n  const { handleRefresh } = useApp();\r\n\r\n\r\n\r\n\r\n  // const [userBalance, setUserBalance] = useState(0);\r\n  // const [refreshing, setRefreshing] = useState(false);\r\n\r\n  //   const handleRefresh = async () => {\r\n  //     if (refreshing) return;\r\n  //     setRefreshing(true);\r\n  \r\n  //     try {\r\n  //       const response = await phoneVerificationService.user_balance_update();\r\n  //       setUserBalance(response.balance);\r\n  //       console.log(\"Balance Data updated:\", response.balance);\r\n  //     } catch (error) {\r\n  //       console.error(\"Error fetching balance:\", error);\r\n  //     } finally {\r\n  //       setTimeout(() => setRefreshing(false), 1000);\r\n  //     }\r\n  //   };\r\n\r\n\r\n\r\n\r\n\r\n  const handlePlay = async (game) => {\r\n    handleRefresh(userId);\r\n    if (isPlaying) return;\r\n\r\n    setIsPlaying(true);\r\n\r\n    try {\r\n      if (userId) {\r\n        const response = await fetch(\r\n          \"http://localhost:5000/api/v1/launch_gamePlayer\",\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              Accept: \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n              userId,\r\n              game_id: \"0\",\r\n              g_type: game.g_type,\r\n              p_code: game.providercode,\r\n            }),\r\n          }\r\n        );\r\n\r\n        const data = await response.json();\r\n\r\n        if (data.errMsg === \"Success\" && userId) {\r\n          setPlayGameData(data);\r\n          setShowPopup(true);\r\n        }\r\n      } else {\r\n        setIsLoginNotify(\"আপনাকে লগইন করতে হবে খেলার জন্য যদি এখনো আপনার একাউন্ট না থাকে আমাদের সাথে। শুধু সাইন আপ করুন আমাদের সাথে। এটা একেবারেই ফ্রী!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error launching game:\", error);\r\n      setIsLoginNotify(\"আপনাকে লগইন করতে হবে খেলার জন্য যদি এখনো আপনার একাউন্ট না থাকে আমাদের সাথে। শুধু সাইন আপ করুন আমাদের সাথে। এটা একেবারেই ফ্রী!\");\r\n    } finally {\r\n      setIsPlaying(false);\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  const handleClosePopup = () => {\r\n    handleRefresh();\r\n    setShowPopup(false);\r\n    setPlayGameData(null);\r\n    \r\n    isPlaying(false);\r\n  };\r\n\r\n  return {\r\n    isPlaying,\r\n    playGameData,\r\n    showPopup,\r\n    handlePlay,\r\n    handleClosePopup,\r\n    setShowPopup,\r\n    setPlayGameData\r\n  };\r\n};"],"mappings":"AAAA;AACA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,wBAAwB,KAAM,sCAAsC,CAC3E,OAASC,MAAM,KAAQ,wBAAwB,CAC/C,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGN,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACO,YAAY,CAAEC,eAAe,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACS,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAEW,MAAM,CAAEC,gBAAiB,CAAC,CAAGX,OAAO,CAAC,CAAC,CAC9C,KAAM,CAAEY,aAAc,CAAC,CAAGV,MAAM,CAAC,CAAC,CAKlC;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA,KAAM,CAAAW,UAAU,CAAG,KAAO,CAAAC,IAAI,EAAK,CACjCF,aAAa,CAACF,MAAM,CAAC,CACrB,GAAIN,SAAS,CAAE,OAEfC,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACF,GAAIK,MAAM,CAAE,CACV,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAC1B,gDAAgD,CAChD,CACEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,MAAM,CAAE,kBACV,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBZ,MAAM,CACNa,OAAO,CAAE,GAAG,CACZC,MAAM,CAAEV,IAAI,CAACU,MAAM,CACnBC,MAAM,CAAEX,IAAI,CAACY,YACf,CAAC,CACH,CACF,CAAC,CAED,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAZ,QAAQ,CAACa,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACE,MAAM,GAAK,SAAS,EAAInB,MAAM,CAAE,CACvCH,eAAe,CAACoB,IAAI,CAAC,CACrBlB,YAAY,CAAC,IAAI,CAAC,CACpB,CACF,CAAC,IAAM,CACLE,gBAAgB,CAAC,+HAA+H,CAAC,CACnJ,CACF,CAAE,MAAOmB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7CnB,gBAAgB,CAAC,+HAA+H,CAAC,CACnJ,CAAC,OAAS,CACRN,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAID,KAAM,CAAA2B,gBAAgB,CAAGA,CAAA,GAAM,CAC7BpB,aAAa,CAAC,CAAC,CACfH,YAAY,CAAC,KAAK,CAAC,CACnBF,eAAe,CAAC,IAAI,CAAC,CAErBH,SAAS,CAAC,KAAK,CAAC,CAClB,CAAC,CAED,MAAO,CACLA,SAAS,CACTE,YAAY,CACZE,SAAS,CACTK,UAAU,CACVmB,gBAAgB,CAChBvB,YAAY,CACZF,eACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}