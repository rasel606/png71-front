{"ast":null,"code":"// services/api.js\nconst API_BASE_URL = 'https://api.png71.live/api';\nclass ApiService {\n  constructor() {\n    this.token = null;\n  }\n  setToken(token) {\n    this.token = token;\n  }\n  async request(endpoint, options = {}) {\n    const url = `${API_BASE_URL}${endpoint}`;\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    const config = {\n      ...options,\n      headers\n    };\n    if (options.body && typeof options.body === 'object' && !(options.body instanceof FormData)) {\n      config.body = JSON.stringify(options.body);\n    } else if (options.body) {\n      config.body = options.body;\n    }\n    const response = await fetch(url, config);\n    if (!response.ok || response.errCode === 0) {\n      let errorMessage = 'API Error';\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorMessage;\n      } catch {\n        // Ignore JSON parsing errors\n      }\n      console.log(\"User profile fetched:\", errorMessage);\n      throw new Error(errorMessage);\n    }\n    return response.json();\n  }\n  get(endpoint, params) {\n    let url = endpoint;\n    if (params && typeof params === \"object\") {\n      const queryString = new URLSearchParams(params).toString();\n      url += `?${queryString}`;\n    }\n    return this.request(url, {\n      method: 'GET'\n    });\n  }\n  post(endpoint, body) {\n    return this.request(endpoint, {\n      method: 'POST',\n      body\n    });\n  }\n  put(endpoint, body) {\n    return this.request(endpoint, {\n      method: 'PUT',\n      body\n    });\n  }\n  delete(endpoint) {\n    return this.request(endpoint, {\n      method: 'DELETE'\n    });\n  }\n  async uploadFile(endpoint, formData, onProgress = null) {\n    const headers = {};\n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    const xhr = new XMLHttpRequest();\n    return new Promise((resolve, reject) => {\n      xhr.upload.addEventListener('progress', event => {\n        if (onProgress && event.lengthComputable) {\n          const percentComplete = event.loaded / event.total * 100;\n          onProgress(percentComplete);\n        }\n      });\n      xhr.addEventListener('load', () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          try {\n            const response = JSON.parse(xhr.responseText);\n            resolve(response);\n          } catch (error) {\n            reject(new Error('Invalid JSON response'));\n          }\n        } else {\n          reject(new Error(`Upload failed: ${xhr.statusText}`));\n        }\n      });\n      xhr.addEventListener('error', () => {\n        reject(new Error('Upload failed'));\n      });\n      xhr.open('POST', `${API_BASE_URL}${endpoint}`);\n      xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\n      xhr.send(formData);\n    });\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_BASE_URL","ApiService","constructor","token","setToken","request","endpoint","options","url","headers","config","body","FormData","JSON","stringify","response","fetch","ok","errCode","errorMessage","errorData","json","message","console","log","Error","get","params","queryString","URLSearchParams","toString","method","post","put","delete","uploadFile","formData","onProgress","xhr","XMLHttpRequest","Promise","resolve","reject","upload","addEventListener","event","lengthComputable","percentComplete","loaded","total","status","parse","responseText","error","statusText","open","setRequestHeader","send","apiService"],"sources":["F:/png71/my-app/src/services/api.js"],"sourcesContent":["// services/api.js\r\nconst API_BASE_URL = 'https://api.png71.live/api';\r\n\r\nclass ApiService {\r\n  constructor() {\r\n    this.token = null;\r\n  }\r\n\r\n  setToken(token) {\r\n    this.token = token;\r\n  }\r\n\r\n  async request(endpoint, options = {}) {\r\n    const url = `${API_BASE_URL}${endpoint}`;\r\n    const headers = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers,\r\n    };\r\n\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    const config = {\r\n      ...options,\r\n      headers,\r\n    };\r\n\r\n    if (options.body && typeof options.body === 'object' && !(options.body instanceof FormData)) {\r\n      config.body = JSON.stringify(options.body);\r\n    } else if (options.body) {\r\n      config.body = options.body;\r\n    }\r\n\r\n    const response = await fetch(url, config);\r\n\r\n    if (!response.ok || response.errCode === 0) {\r\n      let errorMessage = 'API Error';\r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.message || errorMessage;\r\n      } catch {\r\n        // Ignore JSON parsing errors\r\n      }\r\n        console.log(\"User profile fetched:\", errorMessage);\r\n      throw new Error(errorMessage);\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  get(endpoint, params) {\r\n    let url = endpoint;\r\n    if (params && typeof params === \"object\") {\r\n      const queryString = new URLSearchParams(params).toString();\r\n      url += `?${queryString}`;\r\n    }\r\n    return this.request(url, { method: 'GET' });\r\n  }\r\n\r\n  post(endpoint, body) {\r\n    return this.request(endpoint, { method: 'POST', body });\r\n  }\r\n\r\n  put(endpoint, body) {\r\n    return this.request(endpoint, { method: 'PUT', body });\r\n  }\r\n\r\n  delete(endpoint) {\r\n    return this.request(endpoint, { method: 'DELETE' });\r\n  }\r\n\r\n  async uploadFile(endpoint, formData, onProgress = null) {\r\n    const headers = {};\r\n    if (this.token) {\r\n      headers['Authorization'] = `Bearer ${this.token}`;\r\n    }\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    \r\n    return new Promise((resolve, reject) => {\r\n      xhr.upload.addEventListener('progress', (event) => {\r\n        if (onProgress && event.lengthComputable) {\r\n          const percentComplete = (event.loaded / event.total) * 100;\r\n          onProgress(percentComplete);\r\n        }\r\n      });\r\n\r\n      xhr.addEventListener('load', () => {\r\n        if (xhr.status >= 200 && xhr.status < 300) {\r\n          try {\r\n            const response = JSON.parse(xhr.responseText);\r\n            resolve(response);\r\n          } catch (error) {\r\n            reject(new Error('Invalid JSON response'));\r\n          }\r\n        } else {\r\n          reject(new Error(`Upload failed: ${xhr.statusText}`));\r\n        }\r\n      });\r\n\r\n      xhr.addEventListener('error', () => {\r\n        reject(new Error('Upload failed'));\r\n      });\r\n\r\n      xhr.open('POST', `${API_BASE_URL}${endpoint}`);\r\n      xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\r\n      xhr.send(formData);\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}